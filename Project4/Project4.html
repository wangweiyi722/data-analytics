<!DOCTYPE html>
<!-- saved from url=(0034)http://127.0.0.1:6892/Project4.Rmd -->
<html class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="application/shiny-singletons"></script>  <script type="application/html-dependencies">json2[2014.02.04];jquery[1.12.4];babel-polyfill[6.7.2];shiny[1.0.0]</script><script src="./Project4_files/json2-min.js.download"></script>
<script src="./Project4_files/jquery.min.js.download"></script>
<script src="./Project4_files/babel-polyfill.min.js.download"></script>
<link href="./Project4_files/shiny.css" rel="stylesheet">
<script src="./Project4_files/shiny.min.js.download"></script>  <script src="./Project4_files/rmd_loader.js.download"></script>
  <link href="./Project4_files/rmd_loader.css" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="./Project4_files/bootstrap.min.css"><script src="./Project4_files/bootstrap.min.js.download"></script><script src="./Project4_files/html5shiv.min.js.download"></script><script src="./Project4_files/respond.min.js.download"></script><script src="./Project4_files/jquery-ui.min.js.download"></script><link rel="stylesheet" type="text/css" href="./Project4_files/jquery.tocify.css"><script src="./Project4_files/jquery.tocify.js.download"></script><script src="./Project4_files/tabsets.js.download"></script><script src="./Project4_files/codefolding.js.download"></script><link rel="stylesheet" type="text/css" href="./Project4_files/default.css"><script src="./Project4_files/highlight.js.download"></script><link rel="stylesheet" type="text/css" href="./Project4_files/rmd_perf.css"><script src="./Project4_files/rmd_perf.js.download"></script><meta name="rstudio_origin" content="127.0.0.1:16139"><script src="./Project4_files/rsiframe.js.download"></script>



<meta name="generator" content="pandoc">


<meta name="author" content="Group 10: Nathan Caldwell, Isabel Cachola, Edward Gunawan, Weiyi Wang">


<title>Project4</title>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<script type="text/javascript" src="./Project4_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body><div id="MathJax_Message" style="display: none;"></div>
  <div>
    <div data-display-if="!output.__reactivedoc__" style="display: none;">
      <div id="rmd_loader_wrapper">
        <div id="rmd_loader" style="">
          <img src="./Project4_files/rmd_loader.gif">
          <p>Loading</p>
        </div>
      </div>
    </div>
    <div id="__reactivedoc__" class="shiny-html-output shiny-bound-output">







<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#section-TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#section-TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#section-TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="section-TOC" class="tocify">
<ul id="tocify-header0" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="r_session_info">R Session Info</li></ul><ul id="tocify-header1" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="github_link">Github Link</li></ul><ul id="tocify-header2" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="dataworld_link">Data.world Link</li></ul><ul id="tocify-header3" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="decision_tree_predicting_title_1_eligibility">Decision Tree Predicting Title 1 Eligibility</li></ul><ul id="tocify-header4" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="svm_model_of_title_1_eligibility">SVM Model of Title 1 eligibility</li></ul><ul id="tocify-header5" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="random_forest_of_title_1_eligibility">Random Forest of Title 1 Eligibility</li></ul><ul id="tocify-header6" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="clustering_of_school_type_based_on_the_student_teacher_ratio_and_diversity_index">Clustering of school type based on the student teacher ratio and diversity index</li></ul><ul id="tocify-header7" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="title_i_eligibility_by_location">Title I Eligibility by Location</li></ul><ul id="tocify-header8" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="do_all_eligible_schools_receive_title_1_funding">Do all eligible schools receive Title 1 funding?</li></ul><ul id="tocify-header9" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="eligible_schools,_pt_1">Eligible schools, pt. 1</li></ul><ul id="tocify-header10" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="eligible_schools,_pt_2">Eligible schools, pt. 2</li></ul><ul id="tocify-header11" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="eligible_schools,_pt_3">Eligible schools, pt. 3</li></ul><ul id="tocify-header12" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="eligible_schools,_pt_4">Eligible schools, pt. 4</li></ul><ul id="tocify-header13" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="eligible_schools,_conclusion">Eligible schools, conclusion</li></ul></div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="section-header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="http://127.0.0.1:6892/Project4.Rmd#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="http://127.0.0.1:6892/Project4.Rmd#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project4</h1>
<h4 class="author"><em>Group 10: Nathan Caldwell, Isabel Cachola, Edward Gunawan, Weiyi Wang</em></h4>

</div>


<div id="section-r-session-info" class="section level2">
<div name="r_session_info" data-unique="r_session_info"></div><h2><strong>R Session Info</strong></h2>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F361" aria-expanded="false" aria-controls="rcode-643E0F361"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F361"><pre class="r"><code class="r"><span class="identifier">sessionInfo</span><span class="paren">(</span><span class="paren">)</span></code></pre></div>
<pre><code>## R version 3.3.2 (2016-10-31)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 14393)
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] parallel  splines   stats     graphics  grDevices utils     datasets 
## [8] methods   base     
## 
## other attached packages:
##  [1] knitr_1.15.1        gbm_2.1.3           lattice_0.20-34    
##  [4] survival_2.39-5     ggmap_2.6.1         mapdata_2.2-6      
##  [7] maps_3.2.0          randomForest_4.6-12 e1071_1.6-8        
## [10] tree_1.0-37         boot_1.3-18         leaps_3.0          
## [13] glmnet_2.0-13       foreach_1.4.3       Matrix_1.2-7.1     
## [16] ISLR_1.1            dwapi_0.1.1         data.world_1.1.1   
## [19] dplyr_0.5.0         purrr_0.2.2         readr_1.0.0        
## [22] tidyr_0.6.1         tibble_1.3.0        ggplot2_2.2.1      
## [25] tidyverse_1.1.1     shiny_1.0.0        
## 
## loaded via a namespace (and not attached):
##  [1] httr_1.2.1         jsonlite_1.3       modelr_0.1.1      
##  [4] assertthat_0.1     highr_0.6          sp_1.2-4          
##  [7] cellranger_1.1.0   yaml_2.1.14        backports_1.0.5   
## [10] digest_0.6.11      RColorBrewer_1.1-2 rvest_0.3.2       
## [13] colorspace_1.3-2   htmltools_0.3.5    httpuv_1.3.3      
## [16] plyr_1.8.4         psych_1.7.8        broom_0.4.2       
## [19] haven_1.1.0        xtable_1.8-2       scales_0.4.1      
## [22] jpeg_0.1-8         lazyeval_0.2.0     mnormt_1.5-5      
## [25] proto_1.0.0        magrittr_1.5       readxl_1.0.0      
## [28] mime_0.5           evaluate_0.10      nlme_3.1-128      
## [31] forcats_0.2.0      xml2_1.1.1         foreign_0.8-67    
## [34] class_7.3-14       tools_3.3.2        hms_0.3           
## [37] geosphere_1.5-7    RgoogleMaps_1.4.1  stringr_1.1.0     
## [40] munsell_0.4.3      grid_3.3.2         iterators_1.0.8   
## [43] rjson_0.2.15       labeling_0.3       rmarkdown_1.3     
## [46] gtable_0.2.0       codetools_0.2-15   DBI_0.5-1         
## [49] curl_2.4           reshape2_1.4.2     R6_2.2.0          
## [52] ini_0.2            lubridate_1.6.0    rprojroot_1.2     
## [55] stringi_1.1.2      Rcpp_0.12.10       mapproj_1.2-5     
## [58] png_0.1-7</code></pre>
</div>
<div id="section-github-link" class="section level2">
<div name="github_link" data-unique="github_link"></div><h2><strong>Github Link</strong></h2>
<p><a href="https://github.com/isabelcachola/CS329" class="uri">https://github.com/isabelcachola/CS329</a></p>
</div>
<div id="section-data.world-link" class="section level2">
<div name="dataworld_link" data-unique="dataworld_link"></div><h2><strong>Data.world Link</strong></h2>
<p><a href="https://data.world/isabelcachola/f-17-eda-project-4/" class="uri">https://data.world/isabelcachola/f-17-eda-project-4/</a></p>
</div>
<div id="section-decision-tree-predicting-title-1-eligibility" class="section level2">
<div name="decision_tree_predicting_title_1_eligibility" data-unique="decision_tree_predicting_title_1_eligibility"></div><h2>Decision Tree Predicting Title 1 Eligibility</h2>
<p>Creating a decision tree that attempts to predict whether or not a school is Title 1 eligible.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F362" aria-expanded="false" aria-controls="rcode-643E0F362"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F362"><pre class="r"><code class="r"><span class="comment">#require(MASS)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">ISLR</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">tidyverse</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">dplyr</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">data.world</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">ggplot2</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">glmnet</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">leaps</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">boot</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">tree</span><span class="paren">)</span>
<span class="identifier">project</span><span class="operator">&lt;-</span> <span class="string">"https://data.world/wangweiyi722/f-17-eda-project-4"</span>
<span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">set_config</span><span class="paren">(</span><span class="identifier">cfg_env</span><span class="paren">(</span><span class="string">"DW_API"</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">df_w</span> <span class="operator">&lt;-</span> <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">query</span><span class="paren">(</span>
  <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">qry_sql</span><span class="paren">(</span><span class="string">"SELECT * FROM Title1EligibilityPredictors"</span><span class="paren">)</span>,
  <span class="identifier">dataset</span> <span class="operator">=</span> <span class="identifier">project</span>
<span class="paren">)</span>

<span class="keyword">attach</span><span class="paren">(</span><span class="identifier">df_w</span><span class="paren">)</span></code></pre></div>
<pre><code>## The following objects are masked from df_w_complete (pos = 3):
## 
##     title_1_eligible, urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w (pos = 4):
## 
##     percent_free_red_lunch, percent_minority, title_1_eligible,
##     urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w_complete (pos = 14):
## 
##     title_1_eligible, urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w (pos = 17):
## 
##     percent_free_red_lunch, percent_minority, title_1_eligible,
##     urban_locale</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F363" aria-expanded="false" aria-controls="rcode-643E0F363"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F363"><pre class="r"><code class="r"><span class="identifier">set.seed</span><span class="paren">(</span><span class="number">1011</span><span class="paren">)</span>

<span class="identifier">df_w_clean</span> <span class="operator">=</span> <span class="identifier">df_w</span><span class="paren">[</span><span class="identifier">title_1_eligible</span> <span class="operator">!=</span> <span class="string">"Missing"</span>,<span class="paren">]</span>
<span class="identifier">df_w_clean</span> <span class="operator">=</span> <span class="identifier">df_w_clean</span><span class="paren">[</span><span class="identifier">complete.cases</span><span class="paren">(</span><span class="identifier">df_w_clean</span><span class="paren">)</span>,<span class="paren">]</span>
<span class="identifier">eligibility</span> <span class="operator">=</span> <span class="identifier">df_w_clean</span><span class="operator">$</span><span class="identifier">title_1_eligible</span>
<span class="identifier">df_w_clean</span> <span class="operator">=</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">df_w_clean</span>,<span class="identifier">eligibility</span><span class="paren">)</span>
<span class="identifier">train</span><span class="operator">=</span><span class="identifier">sample</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_w_clean</span><span class="paren">)</span>,<span class="number">85000</span><span class="paren">)</span>
<span class="identifier">tree.df_w</span><span class="operator">=</span><span class="identifier">tree</span><span class="paren">(</span><span class="identifier">eligibility</span><span class="operator">~</span>.<span class="operator">-</span><span class="identifier">title_1_eligible</span>,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_w_clean</span>,<span class="identifier">subset</span><span class="operator">=</span><span class="identifier">train</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning in tree(eligibility ~ . - title_1_eligible, data = df_w_clean,
## subset = train): NAs introduced by coercion</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F364" aria-expanded="false" aria-controls="rcode-643E0F364"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F364"><pre class="r"><code class="r"><span class="identifier">summary</span><span class="paren">(</span><span class="identifier">tree.df_w</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Classification tree:
## tree(formula = eligibility ~ . - title_1_eligible, data = df_w_clean, 
##     subset = train)
## Variables actually used in tree construction:
## [1] "percent_free_red_lunch" "percent_minority"      
## Number of terminal nodes:  5 
## Residual mean deviance:  0.9414 = 80010 / 85000 
## Misclassification error rate: 0.2462 = 20929 / 85000</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F365" aria-expanded="false" aria-controls="rcode-643E0F365"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F365"><pre class="r"><code class="r"><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">tree.df_w</span><span class="paren">)</span>
<span class="identifier">text</span><span class="paren">(</span><span class="identifier">tree.df_w</span>,<span class="identifier">pretty</span><span class="operator">=</span><span class="number">0</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-2-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F366" aria-expanded="false" aria-controls="rcode-643E0F366"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F366"><pre class="r"><code class="r"><span class="identifier">tree.pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">tree.df_w</span>,<span class="identifier">df_w_clean</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"class"</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning in pred1.tree(object, tree.matrix(newdata)): NAs introduced by
## coercion</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F367" aria-expanded="false" aria-controls="rcode-643E0F367"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F367"><pre class="r"><code class="r"><span class="identifier">with</span><span class="paren">(</span><span class="identifier">df_w_clean</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span>,<span class="identifier">table</span><span class="paren">(</span><span class="identifier">tree.pred</span>,<span class="identifier">eligibility</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<pre><code>##          eligibility
## tree.pred   No  Yes
##       No  1642 1521
##       Yes  678 5120</code></pre>
</div>
<div id="section-svm-model-of-title-1-eligibility" class="section level2">
<div name="svm_model_of_title_1_eligibility" data-unique="svm_model_of_title_1_eligibility"></div><h2>SVM Model of Title 1 eligibility</h2>
<p>Attempt to create a SVM that predicts title 1 eligibility based on the cultural diversity of the school and the student teacher ratio.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F368" aria-expanded="false" aria-controls="rcode-643E0F368"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F368"><pre class="r"><code class="r"><span class="identifier">df_svm</span> <span class="operator">&lt;-</span> <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">query</span><span class="paren">(</span>
  <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">qry_sql</span><span class="paren">(</span><span class="string">"SELECT * FROM Racial_Spread_and_S_T_Ratio"</span><span class="paren">)</span>,
  <span class="identifier">dataset</span> <span class="operator">=</span> <span class="identifier">project</span>
<span class="paren">)</span>
<span class="identifier">df_svm_clean</span> <span class="operator">=</span> <span class="identifier">df_svm</span><span class="paren">[</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">diversity_index</span><span class="operator">&gt;=</span><span class="number">0</span> <span class="operator">&amp;</span> <span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">american_indian</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">asian</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">hispanic</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">black</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">white</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">pacific</span><span class="operator">+</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">mixed_race</span><span class="operator">&gt;</span><span class="number">0</span> <span class="operator">&amp;</span> <span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">student_teacher_ratio</span><span class="operator">&lt;</span><span class="number">32</span>,<span class="paren">]</span>

<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">diversity_index</span>,<span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">student_teacher_ratio</span>, <span class="identifier">col</span> <span class="operator">=</span> <span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">title_1_eligible</span><span class="operator">==</span><span class="string">'Yes'</span>,<span class="string">"Blue"</span>,<span class="string">"Red"</span><span class="paren">)</span>,<span class="identifier">main</span> <span class="operator">=</span> <span class="string">"Scatterplot of Student Teacher Ratio vs Diversity Index"</span>,<span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Diversity Index"</span>, <span class="identifier">ylab</span> <span class="operator">=</span> <span class="string">"Student Teacher Ratio"</span>,<span class="identifier">pch</span> <span class="operator">=</span> <span class="number">16</span>, <span class="identifier">cex</span> <span class="operator">=</span> <span class="number">.1</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-3-1.png" width="672"> From the scatterplot, There appears to be no distinct pattern of whether the school is eligible for title 1 or not based on these two predictors. Let’s see what a generated svm model says.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F369" aria-expanded="false" aria-controls="rcode-643E0F369"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F369"><pre class="r"><code class="r"><span class="keyword">library</span><span class="paren">(</span><span class="identifier">e1071</span><span class="paren">)</span>
<span class="identifier">set.seed</span><span class="paren">(</span><span class="number">1996</span><span class="paren">)</span>
<span class="identifier">svm_dat</span><span class="operator">=</span><span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">student_teacher_ratio</span>,<span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">diversity_index</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm_clean</span><span class="operator">$</span><span class="identifier">title_1_eligible</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">svm_dat</span><span class="operator">=</span><span class="identifier">svm_dat</span><span class="paren">[</span><span class="identifier">svm_dat</span><span class="operator">$</span><span class="identifier">y</span><span class="operator">!=</span><span class="string">"Missing"</span>,<span class="paren">]</span>
<span class="identifier">svm_dat</span> <span class="operator">=</span> <span class="identifier">svm_dat</span><span class="paren">[</span><span class="identifier">sample</span><span class="paren">(</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">svm_dat</span><span class="paren">)</span>,<span class="number">100</span><span class="paren">)</span>,<span class="paren">]</span> <span class="comment"># get a random sample of 100, svm() takes too long if used with full data set</span>
<span class="identifier">svm_fit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">svm_dat</span><span class="operator">$</span><span class="identifier">y</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">svm_dat</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="number">30</span>,<span class="identifier">scale</span><span class="operator">=</span><span class="literal">FALSE</span><span class="paren">)</span>
<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svm_fit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = svm_dat$y ~ ., data = svm_dat, kernel = "radial", 
##     cost = 30, scale = FALSE)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  30 
##       gamma:  0.5 
## 
## Number of Support Vectors:  76</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3610" aria-expanded="false" aria-controls="rcode-643E0F3610"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3610"><pre class="r"><code class="r"><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">svm_fit</span>,<span class="identifier">svm_dat</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-4-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3611" aria-expanded="false" aria-controls="rcode-643E0F3611"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3611"><pre class="r"><code class="r"><span class="identifier">make.grid</span><span class="operator">=</span><span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">n</span><span class="operator">=</span><span class="number">75</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">grange</span><span class="operator">=</span><span class="identifier">apply</span><span class="paren">(</span><span class="identifier">x</span>,<span class="number">2</span>,<span class="identifier">range</span><span class="paren">)</span>
  <span class="identifier">x1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="identifier">as.double</span><span class="paren">(</span><span class="identifier">grange</span><span class="paren">[</span><span class="number">1</span>,<span class="number">1</span><span class="paren">]</span><span class="paren">)</span>,<span class="identifier">to</span><span class="operator">=</span><span class="identifier">as.double</span><span class="paren">(</span><span class="identifier">grange</span><span class="paren">[</span><span class="number">2</span>,<span class="number">1</span><span class="paren">]</span><span class="paren">)</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">x2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="identifier">as.double</span><span class="paren">(</span><span class="identifier">grange</span><span class="paren">[</span><span class="number">1</span>,<span class="number">2</span><span class="paren">]</span><span class="paren">)</span>,<span class="identifier">to</span><span class="operator">=</span><span class="identifier">as.double</span><span class="paren">(</span><span class="identifier">grange</span><span class="paren">[</span><span class="number">2</span>,<span class="number">2</span><span class="paren">]</span><span class="paren">)</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">x1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">x2</span><span class="paren">)</span>
<span class="paren">}</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">make.grid</span><span class="paren">(</span><span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">svm_dat</span><span class="operator">$</span><span class="identifier">df_svm_clean.student_teacher_ratio</span>,<span class="identifier">svm_dat</span><span class="operator">$</span><span class="identifier">df_svm_clean.diversity_index</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span><span class="operator">=</span><span class="string">"df_svm_clean.student_teacher_ratio"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span><span class="operator">=</span><span class="string">"df_svm_clean.diversity_index"</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svm_fit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"red"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span><span class="paren">[</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="paren">]</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">20</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.2</span>,<span class="identifier">main</span> <span class="operator">=</span> <span class="string">"Svm of Student Teacher Ratio vs Diversity Index"</span>,<span class="identifier">ylab</span> <span class="operator">=</span> <span class="string">"Diversity Index"</span>, <span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Student Teacher Ratio"</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">svm_dat</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">svm_dat</span><span class="operator">$</span><span class="identifier">y</span><span class="paren">)</span><span class="operator">==</span><span class="number">3</span>,<span class="string">"red"</span>,<span class="string">"blue"</span><span class="paren">)</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">svm_dat</span><span class="paren">[</span><span class="identifier">svm_fit</span><span class="operator">$</span><span class="identifier">index</span>,<span class="paren">]</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">5</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">1.5</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-5-1.png" width="672"></p>
</div>
<div id="section-random-forest-of-title-1-eligibility" class="section level2">
<div name="random_forest_of_title_1_eligibility" data-unique="random_forest_of_title_1_eligibility"></div><h2>Random Forest of Title 1 Eligibility</h2>
<p>Applying random forest to the decision tree model to find the best possible model for Title 1 eligibility based on the .</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3612" aria-expanded="false" aria-controls="rcode-643E0F3612"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3612"><pre class="r"><code class="r"><span class="keyword">require</span><span class="paren">(</span><span class="identifier">randomForest</span><span class="paren">)</span>
<span class="identifier">df_w_complete</span> <span class="operator">&lt;-</span> <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">query</span><span class="paren">(</span>
  <span class="identifier">data.world</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">qry_sql</span><span class="paren">(</span><span class="string">"SELECT type,status,urban_locale,title_1_eligible,full_time_teachers, member/full_time_teachers as student_teacher_ratio,total_lunch/member as percent_lunch_program,am/member as percent_american_indian,asian/member as percent_asian,hisp/member as percent_hispanic,black/member as percent_black,white/member as percent_white, pacific/member as percent_pacific_islander,tr/member as percent_mixed FROM SchoolSurvey WHERE member&gt;0 AND full_time_teachers&gt;0 and total_lunch/member&gt;0 AND title_1_eligible!='Missing'"</span><span class="paren">)</span>,
  <span class="identifier">dataset</span> <span class="operator">=</span> <span class="identifier">project</span>
<span class="paren">)</span>
<span class="identifier">df_w_complete</span> <span class="operator">=</span> <span class="identifier">df_w_complete</span><span class="paren">[</span><span class="identifier">complete.cases</span><span class="paren">(</span><span class="identifier">df_w_complete</span><span class="paren">)</span>,<span class="paren">]</span>
<span class="keyword">attach</span><span class="paren">(</span><span class="identifier">df_w_complete</span><span class="paren">)</span></code></pre></div>
<pre><code>## The following objects are masked from df_w (pos = 3):
## 
##     title_1_eligible, urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w_complete (pos = 4):
## 
##     full_time_teachers, percent_american_indian, percent_asian,
##     percent_black, percent_hispanic, percent_lunch_program,
##     percent_mixed, percent_pacific_islander, percent_white,
##     status, student_teacher_ratio, title_1_eligible, type,
##     urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w (pos = 5):
## 
##     title_1_eligible, urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w_complete (pos = 15):
## 
##     full_time_teachers, percent_american_indian, percent_asian,
##     percent_black, percent_hispanic, percent_lunch_program,
##     percent_mixed, percent_pacific_islander, percent_white,
##     status, student_teacher_ratio, title_1_eligible, type,
##     urban_locale</code></pre>
<pre><code>## The following objects are masked from df_w (pos = 18):
## 
##     title_1_eligible, urban_locale</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3613" aria-expanded="false" aria-controls="rcode-643E0F3613"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3613"><pre class="r"><code class="r"><span class="identifier">set.seed</span><span class="paren">(</span><span class="number">1996</span><span class="paren">)</span>
<span class="comment"># cull the data because r has trouble handling 100k rows of data with the pairs function</span>
<span class="identifier">df_w_sample</span> <span class="operator">=</span> <span class="identifier">df_w_complete</span><span class="paren">[</span><span class="identifier">sample</span><span class="paren">(</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_w_complete</span><span class="paren">)</span>,<span class="number">5000</span><span class="paren">)</span>,<span class="paren">]</span>
<span class="identifier">df_w_train</span> <span class="operator">=</span> <span class="identifier">sample</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_w_complete</span><span class="paren">)</span>,<span class="number">5000</span><span class="paren">)</span>

<span class="identifier">pairs</span><span class="paren">(</span><span class="identifier">df_w_sample</span><span class="paren">[</span>,<span class="number">5</span><span class="operator">:</span><span class="number">14</span><span class="paren">]</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-6-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3614" aria-expanded="false" aria-controls="rcode-643E0F3614"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3614"><pre class="r"><code class="r"><span class="identifier">oob.err</span><span class="operator">=</span><span class="identifier">double</span><span class="paren">(</span><span class="number">10</span><span class="paren">)</span>
<span class="identifier">test.err</span><span class="operator">=</span><span class="identifier">double</span><span class="paren">(</span><span class="number">10</span><span class="paren">)</span>
<span class="identifier">numeric_df_w</span> <span class="operator">=</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">title_1_eligible</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="number">1</span>,<span class="number">0</span><span class="paren">)</span>,<span class="identifier">full_time_teachers</span>,<span class="identifier">student_teacher_ratio</span>,<span class="identifier">percent_lunch_program</span>,<span class="identifier">percent_american_indian</span>,<span class="identifier">percent_asian</span>,<span class="identifier">percent_black</span>,<span class="identifier">percent_hispanic</span>,<span class="identifier">percent_white</span>,<span class="identifier">percent_pacific_islander</span>,<span class="identifier">percent_mixed</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">numeric_df_w</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span><span class="operator">=</span><span class="string">"title_1_eligible"</span>

<span class="keyword">for</span><span class="paren">(</span><span class="identifier">mtry</span> <span class="keyword">in</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">school.fit</span><span class="operator">=</span><span class="identifier">randomForest</span><span class="paren">(</span><span class="identifier">title_1_eligible</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">numeric_df_w</span>,<span class="identifier">subset</span><span class="operator">=</span><span class="identifier">df_w_train</span>,<span class="identifier">mtry</span><span class="operator">=</span><span class="identifier">mtry</span>,<span class="identifier">ntree</span><span class="operator">=</span><span class="number">100</span><span class="paren">)</span>
  <span class="identifier">oob.err</span><span class="paren">[</span><span class="identifier">mtry</span><span class="paren">]</span><span class="operator">=</span><span class="identifier">school.fit</span><span class="operator">$</span><span class="identifier">mse</span><span class="paren">[</span><span class="number">100</span><span class="paren">]</span>
  <span class="identifier">school.pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">school.fit</span>,<span class="identifier">numeric_df_w</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="paren">)</span>
  <span class="identifier">test.err</span><span class="paren">[</span><span class="identifier">mtry</span><span class="paren">]</span><span class="operator">=</span><span class="identifier">with</span><span class="paren">(</span><span class="identifier">numeric_df_w</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span>,<span class="identifier">mean</span><span class="paren">(</span><span class="paren">(</span><span class="identifier">title_1_eligible</span><span class="operator">-</span><span class="identifier">school.pred</span><span class="paren">)</span><span class="operator">^</span><span class="number">2</span><span class="paren">)</span><span class="paren">)</span>
  <span class="comment">#cat(mtry," ")</span>
<span class="paren">}</span></code></pre></div>
<pre><code>## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?

## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3615" aria-expanded="false" aria-controls="rcode-643E0F3615"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3615"><pre class="r"><code class="r"><span class="identifier">matplot</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="identifier">mtry</span>,<span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">test.err</span>,<span class="identifier">oob.err</span><span class="paren">)</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"red"</span>,<span class="string">"blue"</span><span class="paren">)</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"b"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Mean Squared Error"</span><span class="paren">)</span><span class="comment">#+legend("right",legend=c("Test","OOB"),pch=19,col=c("red","blue"))</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-6-2.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3616" aria-expanded="false" aria-controls="rcode-643E0F3616"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3616"><pre class="r"><code class="r"><span class="comment"># Based on the error plots, I decided to create the model using mtry = 2</span>
<span class="identifier">school.fit</span><span class="operator">=</span><span class="identifier">randomForest</span><span class="paren">(</span><span class="identifier">title_1_eligible</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">numeric_df_w</span>,<span class="identifier">subset</span><span class="operator">=</span><span class="identifier">df_w_train</span>,<span class="identifier">mtry</span><span class="operator">=</span><span class="number">2</span>,<span class="identifier">ntree</span><span class="operator">=</span><span class="number">100</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning in randomForest.default(m, y, ...): The response has five or fewer
## unique values. Are you sure you want to do regression?</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3617" aria-expanded="false" aria-controls="rcode-643E0F3617"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3617"><pre class="r"><code class="r"><span class="identifier">school.pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">school.fit</span>,<span class="identifier">numeric_df_w</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">df_w_train</span>,<span class="paren">]</span><span class="paren">)</span>
<span class="identifier">table</span><span class="paren">(</span><span class="identifier">round</span><span class="paren">(</span><span class="identifier">school.pred</span><span class="paren">)</span>,<span class="identifier">numeric_df_w</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">df_w_train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">title_1_eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>##    
##         0     1
##   0  8570  4441
##   1 10376 55933</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3618" aria-expanded="false" aria-controls="rcode-643E0F3618"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3618"><pre class="r"><code class="r"><span class="paren">(</span><span class="number">13844</span><span class="operator">+</span><span class="number">37383</span><span class="paren">)</span><span class="operator">/</span><span class="paren">(</span><span class="number">13844</span><span class="operator">+</span><span class="number">26564</span><span class="operator">+</span><span class="number">6229</span><span class="operator">+</span><span class="number">37383</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.6097001</code></pre>
</div>
<div id="section-clustering-of-school-type-based-on-the-student-teacher-ratio-and-diversity-index" class="section level2">
<div name="clustering_of_school_type_based_on_the_student_teacher_ratio_and_diversity_index" data-unique="clustering_of_school_type_based_on_the_student_teacher_ratio_and_diversity_index"></div><h2>Clustering of school type based on the student teacher ratio and diversity index</h2>
<p>Here I use k-means clustering to see if any clear clusters of data can be formed for the schools based on student teacher ratio and diversity index.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3619" aria-expanded="false" aria-controls="rcode-643E0F3619"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3619"><pre class="r"><code class="r"><span class="identifier">set.seed</span><span class="paren">(</span><span class="number">1996</span><span class="paren">)</span>
<span class="identifier">df_cluster</span> <span class="operator">=</span> <span class="identifier">df_w_complete</span>
<span class="identifier">df_cluster</span> <span class="operator">=</span> <span class="identifier">df_cluster</span><span class="paren">[</span><span class="identifier">complete.cases</span><span class="paren">(</span><span class="identifier">df_cluster</span><span class="paren">)</span>,<span class="paren">]</span>
<span class="identifier">df_cluster</span> <span class="operator">=</span> <span class="identifier">df_cluster</span><span class="paren">[</span><span class="identifier">student_teacher_ratio</span><span class="operator">&lt;</span><span class="number">1500</span>,<span class="paren">]</span>
<span class="identifier">df_cluster</span> <span class="operator">=</span> <span class="identifier">df_cluster</span><span class="paren">[</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">type</span> <span class="operator">!=</span> <span class="string">"Regular School"</span>,<span class="paren">]</span>
<span class="identifier">school_type</span> <span class="operator">=</span> <span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">type</span>
<span class="identifier">df_school_type</span> <span class="operator">=</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">school_type</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_school_type</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span><span class="operator">=</span><span class="string">"School_Type"</span>
<span class="identifier">div_ind</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_american_indian</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_asian</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_hispanic</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_black</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_white</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_pacific_islander</span><span class="operator">^</span><span class="number">2</span><span class="operator">-</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">percent_mixed</span><span class="operator">^</span><span class="number">2</span>
<span class="identifier">df_cluster</span> <span class="operator">=</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">df_cluster</span><span class="operator">$</span><span class="identifier">student_teacher_ratio</span>,<span class="identifier">div_ind</span><span class="paren">)</span>

<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">df_cluster</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">school_type</span><span class="paren">)</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">16</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.5</span>,<span class="identifier">main</span><span class="operator">=</span><span class="string">"Scatterplot of Student Teacher Ratio and Diversity Index"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Diversity_index"</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"Student Teacher Ratio"</span><span class="paren">)</span><span class="comment">#+legend("topright",legend=c("Other/Alternative","Special Ed","Vocational","Reportable Program"),pch=19,col=c("black","red","green","blue"))</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-7-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3620" aria-expanded="false" aria-controls="rcode-643E0F3620"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3620"><pre class="r"><code class="r"><span class="identifier">color_eq</span> <span class="operator">=</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"Special education School"</span>,<span class="string">"Vocational School"</span>,<span class="string">"Other/alternative School"</span>,<span class="string">"Reportable Program"</span><span class="paren">)</span>,<span class="identifier">c</span><span class="paren">(</span><span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">color_eq</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span><span class="operator">=</span><span class="string">"School_Type"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">color_eq</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span><span class="operator">=</span><span class="string">"Color"</span>
<span class="identifier">merged_colors</span> <span class="operator">=</span> <span class="identifier">merge</span><span class="paren">(</span><span class="identifier">df_school_type</span>,<span class="identifier">color_eq</span>,<span class="identifier">by</span> <span class="operator">=</span> <span class="string">"School_Type"</span>,<span class="identifier">all</span><span class="operator">=</span> <span class="literal">TRUE</span><span class="paren">)</span>
<span class="identifier">km.schools</span><span class="operator">=</span><span class="identifier">kmeans</span><span class="paren">(</span><span class="identifier">df_cluster</span>,<span class="number">4</span>,<span class="identifier">nstart</span><span class="operator">=</span><span class="number">15</span><span class="paren">)</span>
<span class="identifier">km.schools</span></code></pre></div>
<pre><code>## K-means clustering with 4 clusters of sizes 720, 59, 4, 3794
## 
## Cluster means:
##   df_cluster.student_teacher_ratio   div_ind
## 1                        31.500294 0.3934774
## 2                       119.545173 0.3612379
## 3                       691.314560 0.4485459
## 4                         9.815783 0.4294277
## 
## Clustering vector:
##    [1] 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##   [35] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4
##   [69] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [103] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4
##  [137] 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4
##  [171] 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4
##  [205] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [239] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [273] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [307] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [341] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [375] 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [409] 4 4 4 4 4 1 4 4 4 4 2 4 4 4 1 1 1 4 4 4 4 1 1 1 1 1 1 1 1 4 1 1 1 4
##  [443] 4 4 4 4 4 1 4 4 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [477] 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [511] 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4
##  [545] 4 4 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 4 4 1
##  [579] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4
##  [613] 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [647] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4
##  [681] 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [715] 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4
##  [749] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [783] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4
##  [817] 4 4 4 4 4 1 4 1 4 4 4 1 4 1 1 1 4 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 1
##  [851] 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4
##  [885] 4 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [919] 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4
##  [953] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
##  [987] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1
## [1021] 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4
## [1055] 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 2 4 4 4 4 2 2 4 4 4 4 4
## [1089] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1123] 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4
## [1157] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1191] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1225] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1259] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1293] 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 1 1 4 4 4 4 4 4
## [1327] 4 4 4 1 1 1 1 4 4 4 1 4 1 4 4 1 1 4 1 1 4 1 4 1 4 1 4 4 1 1 4 4 4 1
## [1361] 4 1 4 2 1 1 4 4 4 4 1 1 4 4 4 4 1 4 4 1 1 1 2 2 4 4 1 4 1 4 4 4 1 4
## [1395] 4 4 4 1 4 1 1 1 1 2 1 4 1 4 1 4 4 1 2 4 4 4 1 4 4 4 1 1 1 4 4 4 4 1
## [1429] 4 4 4 1 1 1 4 4 4 1 4 1 1 1 4 1 4 1 1 4 4 4 4 1 4 4 1 4 4 1 4 4 1 4
## [1463] 1 2 1 4 4 4 4 4 4 4 4 4 1 1 1 1 4 1 4 1 1 4 1 4 1 4 4 4 1 1 1 4 4 4
## [1497] 1 4 4 4 4 4 1 4 1 4 4 4 1 4 4 1 4 4 4 1 4 4 4 4 4 1 1 1 2 1 4 1 4 4
## [1531] 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4 4 4 1 4 1 1 4 4 1 1 2 4 1 1 4 4 1 2 4
## [1565] 4 4 1 4 4 1 4 4 4 4 4 4 1 4 4 4 4 4 1 1 4 4 4 4 4 1 1 1 4 1 4 4 4 4
## [1599] 4 1 4 4 1 4 1 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 4 4 4 4 4 4 4 4
## [1633] 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1667] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1701] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4
## [1735] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4
## [1769] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1803] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4
## [1837] 4 4 4 4 4 4 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 4 1 4 1 4 4 1 4 4 1 4 4 2
## [1871] 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 2 4 4 4 4 4 4 4 4 1 4 4 1 4 4 4 4
## [1905] 4 4 1 4 4 4 4 4 1 2 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4
## [1939] 4 4 1 1 4 4 4 4 2 4 4 4 4 2 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [1973] 4 4 1 4 4 1 4 4 4 4 4 4 4 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2007] 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 1 4 4
## [2041] 4 4 4 4 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 1 4 1 4 4 2 4 4 4 4 4 4 4 4 4
## [2075] 4 4 4 4 1 4 4 2 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4
## [2109] 4 4 1 4 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2143] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2177] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2211] 1 4 4 4 4 4 1 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4 4 1 1 1 4 4 4 1 4 1 1 1
## [2245] 1 1 4 4 4 1 1 1 1 1 1 4 1 1 1 1 4 1 4 4 1 4 4 4 1 4 4 4 4 4 1 4 1 1
## [2279] 4 1 1 4 1 4 1 4 4 1 4 4 1 4 4 4 4 4 1 1 4 1 4 4 4 4 4 4 1 1 1 4 4 4
## [2313] 4 4 4 4 4 4 4 1 4 4 4 4 1 1 4 4 4 1 4 1 4 1 4 4 1 1 4 1 1 1 4 4 4 4
## [2347] 4 4 1 4 4 4 4 4 4 4 4 1 4 1 1 4 4 4 4 4 4 1 1 4 4 4 4 4 4 4 1 1 4 4
## [2381] 4 1 4 4 1 4 4 4 4 4 4 1 1 4 1 1 4 4 4 4 4 1 4 1 4 1 4 1 4 1 1 4 1 4
## [2415] 4 4 4 4 4 1 4 1 4 4 4 4 2 4 4 4 4 4 4 4 4 1 4 4 4 1 4 4 1 1 4 1 4 4
## [2449] 1 1 4 1 1 4 4 2 4 1 1 4 1 4 4 1 4 1 1 4 4 1 1 4 4 4 4 4 1 4 4 1 4 1
## [2483] 4 4 1 4 4 1 4 4 4 4 1 4 4 4 4 4 1 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4 1 1
## [2517] 4 4 4 1 4 1 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 4 4
## [2551] 4 1 4 1 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 1 4 4 4 4 1 4 4 4 1 4
## [2585] 1 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 1 1 4 4 4 4 4 1 4 4 4 4 4 4 4 1 4
## [2619] 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2653] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 1 1 4 4 4
## [2687] 1 4 4 4 4 4 4 4 4 4 4 1 2 1 2 1 2 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4
## [2721] 4 4 1 4 4 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 1 4 4 4 1 4 4 4
## [2755] 4 4 1 4 2 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2789] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2823] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2857] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4
## [2891] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [2925] 1 4 1 3 1 1 2 1 4 4 4 4 4 3 4 4 4 4 4 1 4 4 2 4 4 4 4 4 4 4 4 4 4 4
## [2959] 4 4 1 1 1 4 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 1 1 1 1 1 4 4 4 4 4 4 4
## [2993] 4 4 4 4 4 4 4 4 2 4 4 4 4 4 4 1 1 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4
## [3027] 4 1 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4
## [3061] 4 4 4 1 1 4 4 4 4 1 4 1 1 4 4 4 4 4 4 4 4 4 4 1 1 4 4 4 1 4 4 1 4 4
## [3095] 4 4 4 4 4 4 4 1 4 4 4 4 4 1 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4
## [3129] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 1 4 4 1 4 4 1 1 4 1 1 4 4
## [3163] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3197] 1 4 4 4 4 4 4 4 4 4 4 4 4 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4
## [3231] 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4
## [3265] 4 4 4 4 4 4 4 1 4 1 4 1 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3299] 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 1
## [3333] 4 1 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3367] 4 4 4 1 1 4 4 4 4 1 4 4 4 4 1 1 4 4 1 4 1 4 4 1 1 4 4 1 4 1 1 1 4 1
## [3401] 4 1 1 1 4 1 4 4 1 1 1 1 4 1 4 1 4 4 4 4 4 4 1 4 1 4 1 1 4 4 4 1 4 1
## [3435] 1 4 4 1 4 4 4 4 4 4 1 4 4 4 4 4 4 4 1 1 1 4 4 1 4 4 4 1 4 1 4 4 1 4
## [3469] 1 1 1 4 1 4 4 4 1 4 4 4 4 1 1 4 1 4 4 4 4 4 4 4 1 4 1 4 1 4 4 4 1 1
## [3503] 4 4 1 4 1 4 4 4 4 4 1 4 1 4 4 1 4 4 1 1 4 1 1 4 1 4 1 4 4 1 1 4 4 4
## [3537] 4 4 4 4 4 4 4 4 1 4 1 1 4 1 4 4 1 1 4 1 4 4 4 4 4 4 4 4 1 1 4 4 4 4
## [3571] 1 4 4 4 1 4 4 4 4 1 4 4 4 4 4 4 1 1 4 4 1 4 4 1 4 1 4 4 4 2 4 1 1 4
## [3605] 4 4 1 4 4 4 4 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3639] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3673] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 1 4 4 4 1 1 4 1 4
## [3707] 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4
## [3741] 4 4 4 4 4 4 1 4 4 1 4 4 1 4 4 4 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3775] 4 4 4 4 2 4 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3809] 4 4 4 4 4 4 4 1 1 1 4 1 1 4 4 4 1 4 1 4 1 4 4 4 4 1 4 4 4 1 4 4 1 4
## [3843] 1 1 4 4 4 1 4 4 4 4 4 4 4 4 4 2 1 4 4 1 1 4 4 1 4 4 4 4 4 4 4 4 4 4
## [3877] 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4
## [3911] 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4
## [3945] 4 1 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4
## [3979] 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [4013] 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 1 4 4 4 4 4 2 4 4 1 1 4 1 4 4 4 4
## [4047] 4 4 4 4 4 4 4 4 2 4 4 4 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4
## [4081] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [4115] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4
## [4149] 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [4183] 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 1 4 4 4 4 4 4 4 4 4 4 4 4
## [4217] 4 4 4 4 1 4 4 4 4 4 4 3 4 4 1 1 1 4 4 4 4 2 1 4 4 4 4 1 4 4 4 4 1 1
## [4251] 4 4 1 4 4 4 1 1 1 4 4 4 1 4 4 4 1 1 4 4 1 1 4 2 4 1 4 1 4 1 2 1 1 4
## [4285] 4 4 4 4 4 4 4 2 4 4 1 4 2 4 1 4 1 4 1 4 1 1 1 1 1 2 4 1 1 1 1 4 4 1
## [4319] 4 1 1 4 4 4 4 1 1 2 1 1 1 1 4 4 2 1 1 1 1 1 4 4 4 4 1 1 4 4 4 4 1 1
## [4353] 4 1 1 4 1 4 4 1 4 4 1 4 4 4 4 4 1 4 1 4 1 1 1 1 1 4 4 4 1 1 1 1 1 1
## [4387] 1 1 4 1 4 1 1 1 1 4 1 1 1 4 4 1 1 1 4 4 1 1 2 4 2 4 1 1 4 4 1 1 4 4
## [4421] 1 2 1 1 1 1 1 1 4 4 1 1 4 4 4 1 1 4 1 4 4 1 4 1 4 1 2 1 1 4 4 4 4 4
## [4455] 4 4 4 4 1 4 1 4 1 1 4 4 1 1 4 1 1 1 4 1 4 4 4 4 1 1 1 1 4 4 4 4 1 4
## [4489] 1 4 4 1 1 4 4 4 4 1 1 1 1 1 4 1 4 1 4 1 1 1 4 1 4 1 1 4 1 1 1 1 1 4
## [4523] 4 1 4 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
## [4557] 4 4 4 1 4 1 1 1 4 1 1 1 4 4 1 4 4 4 1 4 4
## 
## Within cluster sum of squares by cluster:
## [1] 106085.63 191884.74  87162.68  93238.19
##  (between_SS / total_SS =  85.3 %)
## 
## Available components:
## 
## [1] "cluster"      "centers"      "totss"        "withinss"    
## [5] "tot.withinss" "betweenss"    "size"         "iter"        
## [9] "ifault"</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3621" aria-expanded="false" aria-controls="rcode-643E0F3621"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3621"><pre class="r"><code class="r"><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">df_cluster</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">km.schools</span><span class="operator">$</span><span class="identifier">cluster</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">2</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">1</span>,<span class="identifier">lwd</span><span class="operator">=</span><span class="number">2</span>,<span class="identifier">main</span><span class="operator">=</span><span class="string">"Scatterplot of Student Teacher Ratio and Diversity Index"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Diversity Index"</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"Student Teacher Ratio"</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">df_cluster</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">merged_colors</span><span class="operator">$</span><span class="identifier">Color</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">16</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.5</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-8-1.png" width="672"></p>
<p>This model results in this confusion matrix, showing that the cluster seems to overpredict the 4th cluster</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3622" aria-expanded="false" aria-controls="rcode-643E0F3622"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3622"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">km.schools</span><span class="operator">$</span><span class="identifier">cluster</span>,<span class="identifier">merged_colors</span><span class="operator">$</span><span class="identifier">Color</span><span class="paren">[</span><span class="number">2</span><span class="operator">:</span><span class="number">4578</span><span class="paren">]</span><span class="paren">)</span></code></pre></div>
<pre><code>##    
##        1    2    3    4
##   1  126  195    0  399
##   2    7   15    0   37
##   3    0    1    0    3
##   4  137 1002    1 2654</code></pre>
</div>
<div id="section-title-i-eligibility-by-location" class="section level2 tabset tabset-fade">
<div name="title_i_eligibility_by_location" data-unique="title_i_eligibility_by_location"></div><h2><strong>Title I Eligibility by Location</strong></h2>
<ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-intro" aria-controls="section-intro">Intro</a></li><li role="presentation"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-austin" aria-controls="section-austin">Austin</a></li><li role="presentation"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-san-antonio" aria-controls="section-san-antonio">San Antonio</a></li><li role="presentation"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-los-angeles" aria-controls="section-los-angeles">Los Angeles</a></li><li role="presentation"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-texas" aria-controls="section-texas">Texas</a></li><li role="presentation"><a role="tab" data-toggle="tab" href="http://127.0.0.1:6892/Project4.Rmd#section-us" aria-controls="section-us">US</a></li></ul><div class="tab-content"><div id="section-intro" class="section level3 tab-pane tabbed-pane fade active in" role="tabpanel">

<p>Setting up data…</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3623" aria-expanded="false" aria-controls="rcode-643E0F3623"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3623"><pre class="r"><code class="r"><span class="comment">#require(MASS)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">ISLR</span><span class="paren">)</span>
<span class="keyword">require</span><span class="paren">(</span><span class="identifier">tidyverse</span><span class="paren">)</span>
<span class="keyword">library</span><span class="paren">(</span><span class="identifier">ggplot2</span><span class="paren">)</span>
<span class="keyword">library</span><span class="paren">(</span><span class="identifier">dplyr</span><span class="paren">)</span>
<span class="keyword">library</span><span class="paren">(</span><span class="identifier">maps</span><span class="paren">)</span>
<span class="keyword">library</span><span class="paren">(</span><span class="identifier">mapdata</span><span class="paren">)</span>

<span class="identifier">project</span><span class="operator">&lt;-</span> <span class="string">"https://data.world/wangweiyi722/f-17-eda-project-4"</span>
<span class="identifier">df_orig</span> <span class="operator">&lt;-</span> <span class="identifier">read.csv</span><span class="paren">(</span><span class="string">"https://query.data.world/s/HA6-o2FHiIAxnVdNwfiukSb4hFek3R"</span>, <span class="identifier">header</span> <span class="operator">=</span> <span class="literal">TRUE</span>, <span class="identifier">stringsAsFactors</span> <span class="operator">=</span> <span class="literal">FALSE</span><span class="paren">)</span>

<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"State"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"Location.City"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">4</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"Full.Time.Teachers"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">8</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"Total.Lunch"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">9</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"Longitude"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">10</span><span class="paren">]</span> <span class="operator">&lt;-</span> <span class="string">"Latitude"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="paren">)</span><span class="paren">[</span><span class="number">11</span><span class="paren">]</span> <span class="operator">&lt;-</span><span class="string">"Title.1.Eligible"</span>

<span class="identifier">df_map</span> <span class="operator">=</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="paren">(</span><span class="identifier">df_orig</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="paren">)</span><span class="operator">|</span><span class="paren">(</span><span class="identifier">df_orig</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">df_map</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">df_map</span>, <span class="identifier">factored_stats</span> <span class="operator">=</span> <span class="identifier">factor</span><span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span>, <span class="identifier">levels</span> <span class="operator">=</span> <span class="identifier">c</span><span class="paren">(</span><span class="string">"Yes"</span>,<span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<p><strong>United States Mainland</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3624" aria-expanded="false" aria-controls="rcode-643E0F3624"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3624"><pre class="r"><code class="r"><span class="identifier">states</span> <span class="operator">&lt;-</span> <span class="identifier">map_data</span><span class="paren">(</span><span class="string">"state"</span><span class="paren">)</span>
<span class="identifier">usa</span> <span class="operator">&lt;-</span> <span class="identifier">map_data</span><span class="paren">(</span><span class="string">"usa"</span><span class="paren">)</span>
<span class="identifier">us_base</span> <span class="operator">&lt;-</span> <span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">states</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_polygon</span><span class="paren">(</span><span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span> <span class="operator">=</span> <span class="identifier">long</span>, <span class="identifier">y</span> <span class="operator">=</span> <span class="identifier">lat</span>, <span class="identifier">group</span> <span class="operator">=</span> <span class="identifier">group</span><span class="paren">)</span>, <span class="identifier">color</span> <span class="operator">=</span> <span class="string">"white"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">coord_fixed</span><span class="paren">(</span><span class="number">1.3</span><span class="paren">)</span>

<span class="identifier">df_map_main_us</span> <span class="operator">&lt;-</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_map</span>, <span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">!=</span> <span class="string">"Bureau of Indian Education"</span><span class="paren">)</span><span class="operator">&amp;</span><span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">!=</span> <span class="string">"Northern Marianas"</span><span class="paren">)</span><span class="operator">&amp;</span><span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">!=</span> <span class="string">"Puerto Rico"</span><span class="paren">)</span><span class="operator">&amp;</span><span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">!=</span> <span class="string">"Alaska"</span><span class="paren">)</span><span class="operator">&amp;</span><span class="paren">(</span><span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">!=</span> <span class="string">"Hawaii"</span><span class="paren">)</span><span class="paren">)</span>

<span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">&lt;-</span> <span class="identifier">tolower</span><span class="paren">(</span><span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">State</span><span class="paren">)</span>

<span class="identifier">state_eligibilty_perc</span> <span class="operator">&lt;-</span><span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">state</span> <span class="operator">=</span> <span class="identifier">unique</span><span class="paren">(</span><span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">State</span><span class="paren">)</span>, <span class="identifier">perc</span> <span class="operator">=</span> <span class="identifier">rep</span><span class="paren">(</span><span class="number">0</span>,<span class="number">47</span><span class="paren">)</span><span class="paren">)</span>
<span class="keyword">for</span> <span class="paren">(</span><span class="identifier">i</span> <span class="keyword">in</span> <span class="number">1</span><span class="operator">:</span><span class="number">47</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">state</span> <span class="operator">&lt;-</span> <span class="identifier">state_eligibilty_perc</span><span class="paren">[</span><span class="identifier">i</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">state</span>
  <span class="identifier">num_el</span> <span class="operator">&lt;-</span> <span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map_main_us</span>, <span class="paren">(</span><span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">State</span><span class="operator">==</span><span class="identifier">state</span><span class="paren">)</span><span class="operator">&amp;</span><span class="paren">(</span><span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"Yes"</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>
  <span class="identifier">total</span> <span class="operator">&lt;-</span> <span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map_main_us</span>, <span class="paren">(</span><span class="identifier">df_map_main_us</span><span class="operator">$</span><span class="identifier">State</span><span class="operator">==</span><span class="identifier">state</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>
  <span class="identifier">percent</span> <span class="operator">&lt;-</span> <span class="identifier">num_el</span><span class="operator">/</span><span class="identifier">total</span>
  <span class="identifier">state_eligibilty_perc</span><span class="paren">[</span><span class="identifier">i</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">perc</span> <span class="operator">&lt;-</span> <span class="identifier">percent</span>
<span class="paren">}</span>
<span class="identifier">state_eligibilty_perc</span> <span class="operator">&lt;-</span> <span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">state_eligibilty_perc</span>, <span class="identifier">region</span> <span class="operator">=</span> <span class="identifier">state</span><span class="paren">)</span>
<span class="identifier">el_perc</span> <span class="operator">&lt;-</span> <span class="identifier">inner_join</span><span class="paren">(</span><span class="identifier">state_eligibilty_perc</span>, <span class="identifier">states</span>, <span class="identifier">by</span> <span class="operator">=</span> <span class="string">"region"</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning in inner_join_impl(x, y, by$x, by$y, suffix$x, suffix$y): joining
## factor and character vector, coercing into character vector</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3625" aria-expanded="false" aria-controls="rcode-643E0F3625"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3625"><pre class="r"><code class="r"><span class="identifier">ditch_the_axes</span> <span class="operator">&lt;-</span> <span class="identifier">theme</span><span class="paren">(</span>
  <span class="identifier">axis.text</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>,
  <span class="identifier">axis.line</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>,
  <span class="identifier">axis.ticks</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>,
  <span class="identifier">panel.border</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>,
  <span class="identifier">panel.grid</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>,
  <span class="identifier">axis.title</span> <span class="operator">=</span> <span class="identifier">element_blank</span><span class="paren">(</span><span class="paren">)</span>
<span class="paren">)</span>

<span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">el_perc</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_polygon</span><span class="paren">(</span><span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span> <span class="operator">=</span> <span class="identifier">long</span>, <span class="identifier">y</span> <span class="operator">=</span> <span class="identifier">lat</span>, <span class="identifier">group</span> <span class="operator">=</span> <span class="identifier">group</span>, <span class="identifier">fill</span><span class="operator">=</span><span class="identifier">perc</span><span class="paren">)</span>, <span class="identifier">color</span> <span class="operator">=</span> <span class="string">"white"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ggtitle</span><span class="paren">(</span><span class="string">"Percentage of Title I Eligibility"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">theme_bw</span><span class="paren">(</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">scale_fill_gradientn</span><span class="paren">(</span><span class="identifier">colours</span> <span class="operator">=</span> <span class="identifier">rev</span><span class="paren">(</span><span class="identifier">terrain.colors</span><span class="paren">(</span><span class="number">7</span><span class="paren">)</span><span class="paren">)</span>,
                       <span class="identifier">breaks</span> <span class="operator">=</span> <span class="identifier">c</span><span class="paren">(</span><span class="number">.14</span>, <span class="number">.28</span>, <span class="number">.42</span>, <span class="number">.56</span>, <span class="number">.70</span>, <span class="number">.84</span>, <span class="number">1</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-11-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3626" aria-expanded="false" aria-controls="rcode-643E0F3626"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3626"><pre class="r"><code class="r"><span class="identifier">el_perc</span><span class="paren">[</span><span class="identifier">which.min</span><span class="paren">(</span><span class="identifier">el_perc</span><span class="operator">$</span><span class="identifier">perc</span><span class="paren">)</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">state</span></code></pre></div>
<pre><code>## [1] maryland
## 47 Levels: alabama arizona arkansas california colorado ... wyoming</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3627" aria-expanded="false" aria-controls="rcode-643E0F3627"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3627"><pre class="r"><code class="r"><span class="identifier">el_perc</span><span class="paren">[</span><span class="identifier">which.max</span><span class="paren">(</span><span class="identifier">el_perc</span><span class="operator">$</span><span class="identifier">perc</span><span class="paren">)</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">state</span></code></pre></div>
<pre><code>## [1] new york
## 47 Levels: alabama arizona arkansas california colorado ... wyoming</code></pre>
<p>The map shows the percentage of schools that are Title I eligible for each state. Note that Nevada and Georgia have no data. According to the map, New York has the highest percentage of schools that are Title I eligible and Maryland has the lowest.</p>
<p><strong>Texas</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3628" aria-expanded="false" aria-controls="rcode-643E0F3628"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3628"><pre class="r"><code class="r"><span class="identifier">df_map_texas</span> <span class="operator">=</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map</span>, <span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">==</span> <span class="string">"Texas"</span><span class="paren">)</span>

<span class="identifier">states</span> <span class="operator">&lt;-</span> <span class="identifier">map_data</span><span class="paren">(</span><span class="string">"state"</span><span class="paren">)</span>
<span class="identifier">tx_df</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">states</span>, <span class="identifier">region</span> <span class="operator">==</span> <span class="string">"texas"</span><span class="paren">)</span>
<span class="identifier">tx_base</span> <span class="operator">&lt;-</span> <span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">tx_df</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span> <span class="operator">=</span> <span class="identifier">long</span>, <span class="identifier">y</span> <span class="operator">=</span> <span class="identifier">lat</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">coord_fixed</span><span class="paren">(</span><span class="number">1.3</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_polygon</span><span class="paren">(</span><span class="identifier">color</span> <span class="operator">=</span> <span class="string">"black"</span>, <span class="identifier">fill</span> <span class="operator">=</span> <span class="string">"black"</span><span class="paren">)</span>

<span class="identifier">df_map_texas_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_map_texas</span>, <span class="identifier">df_map_texas</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"Yes"</span><span class="paren">)</span>
<span class="identifier">df_map_texas_not_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map_texas</span>, <span class="identifier">df_map_texas</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"No"</span><span class="paren">)</span>

<span class="identifier">tx_base</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_texas_eligible</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_texas_not_eligible</span>,<span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Not Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">97.743061</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">30.267153</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span> <span class="operator">=</span> <span class="number">18</span><span class="paren">)</span><span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">96.796988</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">32.776664</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">95.369803</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">29.760427</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">98.493628</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">29.424122</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">scale_color_brewer</span><span class="paren">(</span><span class="identifier">palette</span><span class="operator">=</span><span class="string">"PRGn"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-12-1.png" width="672"></p>
<p><strong>California</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3629" aria-expanded="false" aria-controls="rcode-643E0F3629"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3629"><pre class="r"><code class="r"><span class="identifier">df_map_ca</span> <span class="operator">=</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map</span>, <span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">==</span> <span class="string">"California"</span><span class="paren">)</span>

<span class="identifier">states</span> <span class="operator">&lt;-</span> <span class="identifier">map_data</span><span class="paren">(</span><span class="string">"state"</span><span class="paren">)</span>
<span class="identifier">ca_df</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">states</span>, <span class="identifier">region</span> <span class="operator">==</span> <span class="string">"california"</span><span class="paren">)</span>
<span class="identifier">ca_base</span> <span class="operator">&lt;-</span> <span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">ca_df</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span> <span class="operator">=</span> <span class="identifier">long</span>, <span class="identifier">y</span> <span class="operator">=</span> <span class="identifier">lat</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">coord_fixed</span><span class="paren">(</span><span class="number">1.3</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_polygon</span><span class="paren">(</span><span class="identifier">color</span> <span class="operator">=</span> <span class="string">"black"</span>, <span class="identifier">fill</span> <span class="operator">=</span> <span class="string">"black"</span><span class="paren">)</span>

<span class="identifier">df_map_ca_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_map_ca</span>, <span class="identifier">df_map_ca</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"Yes"</span><span class="paren">)</span>
<span class="identifier">df_map_ca_not_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map_ca</span>, <span class="identifier">df_map_ca</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"No"</span><span class="paren">)</span>

<span class="identifier">ca_base</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_ca_eligible</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_ca_not_eligible</span>,<span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Not Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">122.419416</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">37.774929</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">117.161084</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">32.715738</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">118.243685</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">34.052234</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">121.886329</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">37.338208</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">121.494400</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">38.581572</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">scale_color_brewer</span><span class="paren">(</span><span class="identifier">palette</span><span class="operator">=</span><span class="string">"PRGn"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-13-1.png" width="672"></p>
<p><strong>New York</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3630" aria-expanded="false" aria-controls="rcode-643E0F3630"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3630"><pre class="r"><code class="r"><span class="identifier">df_map_ny</span> <span class="operator">=</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map</span>, <span class="identifier">df_map</span><span class="operator">$</span><span class="identifier">State</span> <span class="operator">==</span> <span class="string">"New York"</span><span class="paren">)</span>

<span class="identifier">ny_df</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">states</span>, <span class="identifier">region</span> <span class="operator">==</span> <span class="string">"new york"</span><span class="paren">)</span>
<span class="identifier">ny_base</span> <span class="operator">&lt;-</span> <span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">ny_df</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span> <span class="operator">=</span> <span class="identifier">long</span>, <span class="identifier">y</span> <span class="operator">=</span> <span class="identifier">lat</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">coord_fixed</span><span class="paren">(</span><span class="number">1.3</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_polygon</span><span class="paren">(</span><span class="identifier">color</span> <span class="operator">=</span> <span class="string">"black"</span>, <span class="identifier">fill</span> <span class="operator">=</span> <span class="string">"black"</span><span class="paren">)</span>

<span class="identifier">df_map_ny_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_map_ny</span>, <span class="identifier">df_map_ny</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"Yes"</span><span class="paren">)</span>
<span class="identifier">df_map_ny_not_eligible</span> <span class="operator">&lt;-</span> <span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_map_ny</span>, <span class="identifier">df_map_ny</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"No"</span><span class="paren">)</span>

<span class="identifier">ny_base</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_ny_eligible</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_map_ny_not_eligible</span>,<span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="string">'Not Title I Eligible'</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="operator">-</span><span class="number">74.005973</span>,<span class="identifier">y</span><span class="operator">=</span><span class="number">40.712775</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="string">'Major Cities'</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">5</span>,<span class="identifier">shape</span><span class="operator">=</span><span class="number">18</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">scale_color_brewer</span><span class="paren">(</span><span class="identifier">palette</span><span class="operator">=</span><span class="string">"PRGn"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-14-1.png" width="672"></p>
<p><strong>Looking at all the plots for the charts, it’s clear that Title I eligilble schools tend to be centered around big cities</strong> This should make intuitive sense because high paying jobs tend to be located in cities, rather than in rural areas.</p>
</div><div id="section-austin" class="section level3 tab-pane tabbed-pane fade" role="tabpanel">

<p>About 62 % of Austin schools are T1 eligible, so if we create a model that predicts all schools to be Title I eligible, we would have an error rate of about 38%. We will use this as our baseline.</p>
<p><strong>Linear Basis SVM</strong></p>
<p>Using a linear basis SVM, we can attempt to predict Title I eligibility by location in Austin. Using 10-fold Cross Validation, we tune for the optimal parameters then run a SVM.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3631" aria-expanded="false" aria-controls="rcode-643E0F3631"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3631"><pre class="r"><code class="r"><span class="keyword">library</span><span class="paren">(</span><span class="identifier">e1071</span><span class="paren">)</span>
<span class="identifier">set.seed</span><span class="paren">(</span><span class="number">11</span><span class="paren">)</span>
<span class="identifier">df_svm</span> <span class="operator">=</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="paren">)</span><span class="operator">|</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
         <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Location.City</span> <span class="operator">==</span> <span class="string">'AUSTIN'</span> <span class="operator">&amp;</span> <span class="identifier">Longitude</span> <span class="operator">&lt;</span> <span class="operator">-</span><span class="number">95</span> <span class="operator">&amp;</span> <span class="identifier">Latitude</span> <span class="operator">&lt;</span> <span class="number">35</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
         <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">Longitude</span>, <span class="identifier">Latitude</span>, <span class="identifier">Title.1.Eligible</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
         <span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">Longitude_Scaled</span> <span class="operator">=</span> <span class="identifier">Longitude</span><span class="operator">/</span><span class="number">3</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>

<span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_svm</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude_Scaled</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">geom_point</span><span class="paren">(</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-15-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3632" aria-expanded="false" aria-controls="rcode-643E0F3632"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3632"><pre class="r"><code class="r"><span class="comment"># Linear SVM</span>
<span class="identifier">tuned</span> <span class="operator">=</span> <span class="identifier">tune.svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">Longitude_Scaled</span><span class="operator">+</span><span class="identifier">Latitude</span>, <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_svm</span>,
                 <span class="identifier">kernel</span> <span class="operator">=</span> <span class="string">"linear"</span>,
                 <span class="identifier">cost</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">tunecontrol</span><span class="operator">=</span><span class="identifier">tune.control</span><span class="paren">(</span><span class="identifier">cross</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span><span class="paren">)</span>

<span class="identifier">best_cost</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">cost</span>

<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">Longitude_Scaled</span><span class="operator">+</span><span class="identifier">Latitude</span>,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_svm</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"linear"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="identifier">best_cost</span><span class="paren">)</span>
<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = Title.1.Eligible ~ Longitude_Scaled + Latitude, 
##     data = df_svm, type = "C", kernel = "linear", cost = best_cost)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  linear 
##        cost:  1 
##       gamma:  0.5 
## 
## Number of Support Vectors:  111</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3633" aria-expanded="false" aria-controls="rcode-643E0F3633"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3633"><pre class="r"><code class="r"><span class="identifier">make.grid</span><span class="operator">=</span><span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">n</span><span class="operator">=</span><span class="number">100</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">grange</span><span class="operator">=</span><span class="identifier">apply</span><span class="paren">(</span><span class="identifier">x</span>,<span class="number">2</span>,<span class="identifier">range</span><span class="paren">)</span>
  <span class="identifier">x1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="operator">-</span><span class="number">32.67</span>,<span class="operator">-</span><span class="number">32.52</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">x2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="number">30.12</span>,<span class="number">30.55</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">x1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">x2</span><span class="paren">)</span>
<span class="paren">}</span>

<span class="identifier">x</span><span class="operator">=</span> <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude_Scaled</span>,<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">y</span> <span class="operator">=</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span>
<span class="identifier">col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span>  <span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span> <span class="paren">}</span>
<span class="identifier">col</span> <span class="operator">&lt;-</span><span class="identifier">col_func</span><span class="paren">(</span><span class="identifier">y</span><span class="paren">)</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">make.grid</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"Longitude_Scaled"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"Latitude"</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"red"</span>,<span class="string">"blue"</span><span class="paren">)</span><span class="paren">[</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="paren">]</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">20</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.2</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">col</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-15-2.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3634" aria-expanded="false" aria-controls="rcode-643E0F3634"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3634"><pre class="r"><code class="r"><span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.performance</span></code></pre></div>
<pre><code>## [1] 0.2201299</code></pre>
<p>Looking at the plot, we can see that the model picks up the fact the schools in East Austin are more likely to be Title 1 eligible.</p>
<p><strong>Radial Basis SVM</strong></p>
<p>Now we try Radial Basis SVM. Again we perform 10-fold CV to tune the parameters.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3635" aria-expanded="false" aria-controls="rcode-643E0F3635"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3635"><pre class="r"><code class="r"><span class="keyword">library</span><span class="paren">(</span><span class="identifier">ggmap</span><span class="paren">)</span>
<span class="identifier">tuned</span> <span class="operator">=</span> <span class="identifier">tune.svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">Longitude_Scaled</span><span class="operator">+</span><span class="identifier">Latitude</span>, <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_svm</span>,
                 <span class="identifier">cost</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">gamma</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">kernel</span> <span class="operator">=</span> <span class="string">"radial"</span>,
                 <span class="identifier">tunecontrol</span><span class="operator">=</span><span class="identifier">tune.control</span><span class="paren">(</span><span class="identifier">cross</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">best_gamma</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">gamma</span>
<span class="identifier">best_cost</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">cost</span>

<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">Longitude_Scaled</span><span class="operator">+</span><span class="identifier">Latitude</span>,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_svm</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="identifier">best_cost</span>,<span class="identifier">gamma</span><span class="operator">=</span><span class="identifier">best_gamma</span><span class="paren">)</span>

<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = Title.1.Eligible ~ Longitude_Scaled + Latitude, 
##     data = df_svm, type = "C", kernel = "radial", cost = best_cost, 
##     gamma = best_gamma)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  1 
##       gamma:  1 
## 
## Number of Support Vectors:  109</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3636" aria-expanded="false" aria-controls="rcode-643E0F3636"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3636"><pre class="r"><code class="r"><span class="identifier">make.grid</span><span class="operator">=</span><span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">n</span><span class="operator">=</span><span class="number">100</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">grange</span><span class="operator">=</span><span class="identifier">apply</span><span class="paren">(</span><span class="identifier">x</span>,<span class="number">2</span>,<span class="identifier">range</span><span class="paren">)</span>
  <span class="identifier">x1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="operator">-</span><span class="number">32.67</span>,<span class="operator">-</span><span class="number">32.52</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">x2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="number">30.12</span>,<span class="number">30.55</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">x1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">x2</span><span class="paren">)</span>
<span class="paren">}</span>

<span class="identifier">x</span><span class="operator">=</span> <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude_Scaled</span>,<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">y</span> <span class="operator">=</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span>
<span class="identifier">col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span>  <span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span> <span class="paren">}</span>
<span class="identifier">col</span> <span class="operator">&lt;-</span><span class="identifier">col_func</span><span class="paren">(</span><span class="identifier">y</span><span class="paren">)</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">make.grid</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"Longitude_Scaled"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"Latitude"</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"red"</span>,<span class="string">"blue"</span><span class="paren">)</span><span class="paren">[</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="paren">]</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">20</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.2</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">col</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-16-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3637" aria-expanded="false" aria-controls="rcode-643E0F3637"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3637"><pre class="r"><code class="r"><span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.performance</span></code></pre></div>
<pre><code>## [1] 0.1738095</code></pre>
<p>Looking at the error rates, it’s clear that <em>radial basis SVM performs better</em>. In fact, we can lay the points over a map to see more specifically where the T1 schools lie.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3638" aria-expanded="false" aria-controls="rcode-643E0F3638"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3638"><pre class="r"><code class="r"><span class="identifier">lat</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">lon</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude_Scaled</span><span class="operator">*</span><span class="number">3</span><span class="paren">)</span>
<span class="identifier">T1</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">df_austin</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">lat</span>,<span class="identifier">lon</span>,<span class="identifier">T1</span><span class="paren">)</span>

<span class="identifier">austin</span> <span class="operator">&lt;-</span> <span class="identifier">get_googlemap</span><span class="paren">(</span><span class="identifier">center</span><span class="operator">=</span> <span class="identifier">c</span><span class="paren">(</span><span class="identifier">lon</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">97.743061</span>, <span class="identifier">lat</span> <span class="operator">=</span> <span class="number">30.267153</span><span class="paren">)</span>, <span class="identifier">maptype</span> <span class="operator">=</span> <span class="string">"roadmap"</span>,<span class="identifier">zoom</span> <span class="operator">=</span> <span class="number">11</span><span class="paren">)</span></code></pre></div>
<pre><code>## Map from URL : http://maps.googleapis.com/maps/api/staticmap?center=30.267153,-97.743061&amp;zoom=11&amp;size=640x640&amp;scale=2&amp;maptype=roadmap&amp;sensor=false</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3639" aria-expanded="false" aria-controls="rcode-643E0F3639"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3639"><pre class="r"><code class="r"><span class="identifier">df_austin</span><span class="operator">$</span><span class="identifier">Longitude_Scaled</span> <span class="operator">&lt;-</span> <span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude_Scaled</span>
<span class="identifier">df_austin</span><span class="operator">$</span><span class="identifier">Latitude</span> <span class="operator">&lt;-</span> <span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span>
<span class="identifier">test</span> <span class="operator">&lt;-</span> <span class="identifier">df_austin</span>
<span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span> <span class="operator">&lt;-</span> <span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>, <span class="identifier">df_austin</span><span class="paren">)</span>

<span class="identifier">ggmap</span><span class="paren">(</span><span class="identifier">austin</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">test</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">lon</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">lat</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="identifier">pred</span>, <span class="identifier">shape</span> <span class="operator">=</span> <span class="identifier">T1</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">3</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">labs</span><span class="paren">(</span><span class="identifier">title</span> <span class="operator">=</span> <span class="string">"Radial Basis SVM Predictions"</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning: Removed 14 rows containing missing values (geom_point).</code></pre>
<p><img src="./Project4_files/unnamed-chunk-17-1.png" width="672"></p>
<p><strong>Perc. of White Students vs Perc. of Free/Reduced Lunch</strong></p>
<p>We will be looking at how the percentage of white students vs.&nbsp;the percentage of student eligible for free/reduced lunch in Austin. First let’s look at the distribution:</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3640" aria-expanded="false" aria-controls="rcode-643E0F3640"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3640"><pre class="r"><code class="r"><span class="identifier">set.seed</span><span class="paren">(</span><span class="number">11</span><span class="paren">)</span>
<span class="identifier">df4</span> <span class="operator">&lt;-</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="operator">|</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
                     <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Location.City</span><span class="operator">==</span><span class="string">"AUSTIN"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
                     <span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">stratio</span> <span class="operator">=</span> <span class="identifier">Full.Time.Teachers</span> <span class="operator">/</span> <span class="identifier">member</span>,
                            <span class="identifier">perc_white</span> <span class="operator">=</span> <span class="identifier">white</span> <span class="operator">/</span> <span class="identifier">member</span>,
                            <span class="identifier">perc_lunch</span> <span class="operator">=</span> <span class="identifier">Total.Lunch</span> <span class="operator">/</span> <span class="identifier">member</span><span class="paren">)</span>

<span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df4</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">perc_white</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">perc_lunch</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">xlab</span><span class="paren">(</span><span class="string">"Percentage of White Students"</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">ylab</span><span class="paren">(</span><span class="string">"Percentage of Students Qualified for Free/Reduced Lunch"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ggtitle</span><span class="paren">(</span><span class="string">"Schools in Austin"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-18-1.png" width="672"></p>
<p>It looks like there is a cluster in the bottom right and the top left.</p>
<p><strong>SVM</strong> First let’s try a supervised approach, testing for Title I eligibility.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3641" aria-expanded="false" aria-controls="rcode-643E0F3641"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3641"><pre class="r"><code class="r"><span class="comment"># SVM</span>
<span class="identifier">y</span><span class="operator">&lt;-</span><span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">x</span><span class="operator">&lt;-</span> <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">df4</span><span class="operator">$</span><span class="identifier">perc_white</span>,<span class="identifier">df4</span><span class="operator">$</span><span class="identifier">perc_lunch</span><span class="paren">)</span>
<span class="identifier">tuned</span> <span class="operator">=</span> <span class="identifier">tune.svm</span><span class="paren">(</span><span class="identifier">y</span><span class="operator">~</span><span class="identifier">x</span>, <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df4</span>,
                 <span class="identifier">cost</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">gamma</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">kernel</span> <span class="operator">=</span> <span class="string">"radial"</span>,
                 <span class="identifier">tunecontrol</span><span class="operator">=</span><span class="identifier">tune.control</span><span class="paren">(</span><span class="identifier">cross</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">best_gamma</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">gamma</span>
<span class="identifier">best_cost</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">cost</span>

<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">perc_white</span><span class="operator">+</span><span class="identifier">perc_lunch</span>,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df4</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="identifier">best_cost</span>,<span class="identifier">gamma</span><span class="operator">=</span><span class="identifier">best_gamma</span><span class="paren">)</span>

<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = Title.1.Eligible ~ perc_white + perc_lunch, data = df4, 
##     type = "C", kernel = "radial", cost = best_cost, gamma = best_gamma)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  7 
##       gamma:  10 
## 
## Number of Support Vectors:  92</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3642" aria-expanded="false" aria-controls="rcode-643E0F3642"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3642"><pre class="r"><code class="r"><span class="identifier">make.grid</span><span class="operator">=</span><span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">n</span><span class="operator">=</span><span class="number">100</span><span class="paren">)</span><span class="paren">{</span>
  <span class="identifier">grange</span><span class="operator">=</span><span class="identifier">apply</span><span class="paren">(</span><span class="identifier">x</span>,<span class="number">2</span>,<span class="identifier">range</span><span class="paren">)</span>
  <span class="identifier">x1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="number">0</span>,<span class="number">1</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">x2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="number">0</span>,<span class="number">1</span>,<span class="identifier">length</span><span class="operator">=</span><span class="identifier">n</span><span class="paren">)</span>
  <span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">x1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">x2</span><span class="paren">)</span>
<span class="paren">}</span>

<span class="identifier">col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span>  <span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span> <span class="paren">}</span>
<span class="identifier">col</span> <span class="operator">&lt;-</span><span class="identifier">col_func</span><span class="paren">(</span><span class="identifier">y</span><span class="paren">)</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">make.grid</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">1</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"perc_white"</span>
<span class="identifier">colnames</span><span class="paren">(</span><span class="identifier">xgrid</span><span class="paren">)</span><span class="paren">[</span><span class="number">2</span><span class="paren">]</span> <span class="operator">=</span> <span class="string">"perc_lunch"</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">c</span><span class="paren">(</span><span class="string">"red"</span>,<span class="string">"blue"</span><span class="paren">)</span><span class="paren">[</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="paren">]</span>,
     <span class="identifier">pch</span><span class="operator">=</span><span class="number">20</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.2</span>,
     <span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Percentage of White Students"</span>,
     <span class="identifier">ylab</span> <span class="operator">=</span> <span class="string">"Percentage of Students Qualified for Free/Reduced Lunch"</span>,
     <span class="identifier">main</span> <span class="operator">=</span> <span class="string">"Radial Basis SVM"</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">col</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-19-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3643" aria-expanded="false" aria-controls="rcode-643E0F3643"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3643"><pre class="r"><code class="r"><span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.performance</span></code></pre></div>
<pre><code>## [1] 0.08247863</code></pre>
<p><strong>K-means Clustering</strong> Now let’s look at an unsupervised approach.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3644" aria-expanded="false" aria-controls="rcode-643E0F3644"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3644"><pre class="r"><code class="r"><span class="identifier">col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span>  <span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span> <span class="paren">}</span>
<span class="identifier">x</span> <span class="operator">&lt;-</span> <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">df4</span><span class="operator">$</span><span class="identifier">perc_white</span>,<span class="identifier">df4</span><span class="operator">$</span><span class="identifier">perc_lunch</span><span class="paren">)</span>
<span class="identifier">col</span> <span class="operator">&lt;-</span> <span class="identifier">col_func</span><span class="paren">(</span><span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>

<span class="identifier">km.out</span><span class="operator">=</span><span class="identifier">kmeans</span><span class="paren">(</span><span class="identifier">x</span>,<span class="number">2</span><span class="paren">)</span>
<span class="identifier">km.out</span></code></pre></div>
<pre><code>## K-means clustering with 2 clusters of sizes 122, 112
## 
## Cluster means:
##         [,1]      [,2]
## 1 0.08440701 0.8504172
## 2 0.57561250 0.2355751
## 
## Clustering vector:
##   [1] 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 1 1 2 2 2 2 2 1 2 1 1 1 2
##  [36] 2 1 1 1 1 1 1 1 1 1 2 1 1 2 1 2 1 2 1 1 1 1 2 1 1 2 1 1 2 1 1 1 1 1 2
##  [71] 1 1 1 2 1 2 2 1 1 2 1 2 1 1 1 2 2 1 2 1 2 2 1 1 1 1 2 1 1 1 1 1 1 1 1
## [106] 1 2 1 1 1 1 1 1 1 1 1 2 1 1 2 2 1 2 1 2 2 2 2 1 1 2 1 1 1 1 2 1 1 1 2
## [141] 1 2 2 2 1 1 2 1 1 1 2 1 1 1 1 1 2 2 1 2 1 1 1 1 1 2 1 1 1 1 1 1 2 1 1
## [176] 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1
## [211] 1 1 1 1 1 2 1 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 1 2
## 
## Within cluster sum of squares by cluster:
## [1] 3.268035 8.487964
##  (between_SS / total_SS =  75.5 %)
## 
## Available components:
## 
## [1] "cluster"      "centers"      "totss"        "withinss"    
## [5] "tot.withinss" "betweenss"    "size"         "iter"        
## [9] "ifault"</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3645" aria-expanded="false" aria-controls="rcode-643E0F3645"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3645"><pre class="r"><code class="r"><span class="identifier">km.out</span><span class="operator">$</span><span class="identifier">cluster</span></code></pre></div>
<pre><code>##   [1] 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 1 1 2 2 2 2 2 1 2 1 1 1 2
##  [36] 2 1 1 1 1 1 1 1 1 1 2 1 1 2 1 2 1 2 1 1 1 1 2 1 1 2 1 1 2 1 1 1 1 1 2
##  [71] 1 1 1 2 1 2 2 1 1 2 1 2 1 1 1 2 2 1 2 1 2 2 1 1 1 1 2 1 1 1 1 1 1 1 1
## [106] 1 2 1 1 1 1 1 1 1 1 1 2 1 1 2 2 1 2 1 2 2 2 2 1 1 2 1 1 1 1 2 1 1 1 2
## [141] 1 2 2 2 1 1 2 1 1 1 2 1 1 1 1 1 2 2 1 2 1 1 1 1 1 2 1 1 1 1 1 1 2 1 1
## [176] 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1
## [211] 1 1 1 1 1 2 1 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 1 2</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3646" aria-expanded="false" aria-controls="rcode-643E0F3646"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3646"><pre class="r"><code class="r"><span class="identifier">cluster_col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"1"</span>,<span class="string">'orange'</span>,<span class="string">'green'</span><span class="paren">)</span><span class="paren">}</span>
<span class="identifier">cluster_col</span> <span class="operator">&lt;-</span> <span class="identifier">cluster_col_func</span><span class="paren">(</span><span class="identifier">km.out</span><span class="operator">$</span><span class="identifier">cluster</span><span class="paren">)</span>
<span class="identifier">clust_pred_function</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"2"</span>,<span class="string">"No"</span>,<span class="string">"Yes"</span><span class="paren">)</span><span class="paren">}</span>
<span class="identifier">clust_pred</span> <span class="operator">&lt;-</span> <span class="identifier">clust_pred_function</span><span class="paren">(</span><span class="identifier">km.out</span><span class="operator">$</span><span class="identifier">cluster</span><span class="paren">)</span>

<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">cluster_col</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">2</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">1</span>,<span class="identifier">lwd</span><span class="operator">=</span><span class="number">2</span>,
     <span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Percentage of White Students"</span>,
     <span class="identifier">ylab</span> <span class="operator">=</span> <span class="string">"Percentage of Students Qualified for Free/Reduced Lunch"</span>,
     <span class="identifier">main</span> <span class="operator">=</span> <span class="string">"Clustering"</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">col</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span>
<span class="identifier">text</span><span class="paren">(</span><span class="number">.95</span>,<span class="number">.95</span>,<span class="identifier">labels</span> <span class="operator">=</span> <span class="identifier">paste</span><span class="paren">(</span><span class="string">"Error ="</span>,<span class="identifier">toString</span><span class="paren">(</span><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">clust_pred</span> <span class="operator">!=</span> <span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-20-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3647" aria-expanded="false" aria-controls="rcode-643E0F3647"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3647"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">clust_pred</span>, <span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>##           
## clust_pred  No Yes
##        No   79  33
##        Yes  10 112</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3648" aria-expanded="false" aria-controls="rcode-643E0F3648"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3648"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">clust_pred</span> <span class="operator">!=</span> <span class="identifier">df4</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.1837607</code></pre>
<p>Although this does not perform as well as the supervised methods, it is still interesting that the clustering still performs significantly better than our baseline. This means that if we were not given the classifications for the schools, we could still build a fairly decent model using unsupervised learning.</p>
<p><strong>Hierarchical Clustering</strong></p>
<p>Finally let’s try Hierarchical Clustering</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3649" aria-expanded="false" aria-controls="rcode-643E0F3649"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3649"><pre class="r"><code class="r"><span class="identifier">df6</span> <span class="operator">&lt;-</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="operator">|</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
     <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Location.City</span><span class="operator">==</span><span class="string">"AUSTIN"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
     <span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">stratio</span> <span class="operator">=</span> <span class="identifier">Full.Time.Teachers</span> <span class="operator">/</span> <span class="identifier">member</span>,
            <span class="identifier">perc_white</span> <span class="operator">=</span> <span class="identifier">white</span> <span class="operator">/</span> <span class="identifier">member</span>,
            <span class="identifier">perc_lunch</span> <span class="operator">=</span> <span class="identifier">Total.Lunch</span> <span class="operator">/</span> <span class="identifier">member</span><span class="paren">)</span>
<span class="identifier">x</span> <span class="operator">&lt;-</span> <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">df6</span><span class="operator">$</span><span class="identifier">perc_white</span>,<span class="identifier">df6</span><span class="operator">$</span><span class="identifier">perc_lunch</span><span class="paren">)</span>
<span class="identifier">y</span> <span class="operator">&lt;-</span> <span class="identifier">df6</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span>

<span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df6</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">perc_white</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">perc_lunch</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">xlab</span><span class="paren">(</span><span class="string">"Percentage of White Students"</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">ylab</span><span class="paren">(</span><span class="string">"Percentage of Students Qualified for Free/Reduced Lunch"</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ggtitle</span><span class="paren">(</span><span class="string">"Schools in Austin"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-21-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3650" aria-expanded="false" aria-controls="rcode-643E0F3650"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3650"><pre class="r"><code class="r"><span class="identifier">hc.complete</span><span class="operator">=</span><span class="identifier">hclust</span><span class="paren">(</span><span class="identifier">dist</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span>,<span class="identifier">method</span><span class="operator">=</span><span class="string">"complete"</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">hc.complete</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-21-2.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3651" aria-expanded="false" aria-controls="rcode-643E0F3651"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3651"><pre class="r"><code class="r"><span class="identifier">hc.cut</span><span class="operator">=</span><span class="identifier">cutree</span><span class="paren">(</span><span class="identifier">hc.complete</span>,<span class="number">2</span><span class="paren">)</span>
<span class="identifier">hc.cut</span></code></pre></div>
<pre><code>##   [1] 1 1 1 1 1 2 2 2 2 1 2 2 2 1 2 2 2 1 2 2 2 2 1 1 2 2 2 2 2 1 1 1 1 1 2
##  [36] 2 1 1 1 1 1 1 1 1 1 2 1 1 2 1 2 1 2 1 1 1 1 2 1 1 2 1 1 2 1 1 1 1 1 2
##  [71] 1 1 1 2 1 2 2 1 1 2 1 2 1 1 1 2 2 1 2 1 2 2 1 1 1 1 2 1 1 1 1 1 1 1 1
## [106] 1 2 1 1 1 1 1 1 1 1 1 2 1 1 2 2 1 2 1 2 2 2 2 1 1 2 1 1 1 1 2 1 1 1 2
## [141] 1 2 2 2 1 1 2 1 1 1 2 1 1 1 1 1 2 2 1 2 1 1 1 1 1 2 1 1 1 1 1 1 2 1 1
## [176] 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1
## [211] 1 1 1 1 1 2 1 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 1 2</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3652" aria-expanded="false" aria-controls="rcode-643E0F3652"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3652"><pre class="r"><code class="r"><span class="identifier">cluster_col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"1"</span>,<span class="string">'orange'</span>,<span class="string">'green'</span><span class="paren">)</span><span class="paren">}</span>
<span class="identifier">cluster_col</span> <span class="operator">&lt;-</span> <span class="identifier">cluster_col_func</span><span class="paren">(</span><span class="identifier">hc.cut</span><span class="paren">)</span>
<span class="identifier">col_func</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="string">"blue"</span>,<span class="string">"red"</span><span class="paren">)</span><span class="paren">}</span>
<span class="identifier">col</span> <span class="operator">&lt;-</span> <span class="identifier">col_func</span><span class="paren">(</span><span class="identifier">y</span><span class="paren">)</span>

<span class="identifier">clust_pred_function</span> <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="paren">(</span><span class="identifier">x</span><span class="paren">)</span><span class="paren">{</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">==</span><span class="number">2</span>,<span class="string">"No"</span>,<span class="string">"Yes"</span><span class="paren">)</span><span class="paren">}</span>
<span class="identifier">clust_pred</span> <span class="operator">&lt;-</span> <span class="identifier">clust_pred_function</span><span class="paren">(</span><span class="identifier">hc.cut</span><span class="paren">)</span>

<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">cluster_col</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">2</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">1</span>,<span class="identifier">lwd</span><span class="operator">=</span><span class="number">2</span>,
             <span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Percentage of White Students"</span>,
             <span class="identifier">ylab</span> <span class="operator">=</span> <span class="string">"Percentage of Students Qualified for Free/Reduced Lunch"</span>,
             <span class="identifier">main</span> <span class="operator">=</span> <span class="string">"Clustering"</span><span class="paren">)</span>
<span class="identifier">points</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">x</span><span class="paren">[</span>,<span class="number">1</span><span class="paren">]</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">x</span><span class="paren">[</span>,<span class="number">2</span><span class="paren">]</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">col</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span><span class="paren">)</span>
<span class="identifier">text</span><span class="paren">(</span><span class="number">.95</span>,<span class="number">.95</span>,<span class="identifier">labels</span> <span class="operator">=</span> <span class="identifier">paste</span><span class="paren">(</span><span class="string">"Error ="</span>,<span class="identifier">toString</span><span class="paren">(</span><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">clust_pred</span> <span class="operator">!=</span> <span class="identifier">df6</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-21-3.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3653" aria-expanded="false" aria-controls="rcode-643E0F3653"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3653"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">clust_pred</span>, <span class="identifier">df6</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>##           
## clust_pred  No Yes
##        No   78  26
##        Yes  11 119</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3654" aria-expanded="false" aria-controls="rcode-643E0F3654"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3654"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">clust_pred</span> <span class="operator">!=</span> <span class="identifier">df6</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.1581197</code></pre>
<p>We can see that Hierarchical Clustering performs better than K-means.</p>
</div><div id="section-san-antonio" class="section level3 tab-pane tabbed-pane fade" role="tabpanel">

<p>First let’s take a look a the distribution of schools in San Antonio.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3655" aria-expanded="false" aria-controls="rcode-643E0F3655"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3655"><pre class="r"><code class="r"><span class="identifier">df_svm</span> <span class="operator">=</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="paren">)</span><span class="operator">|</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Location.City</span> <span class="operator">==</span> <span class="string">'SAN ANTONIO'</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">Longitude</span>, <span class="identifier">Latitude</span>, <span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">lat</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">lon</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span><span class="paren">)</span>
<span class="identifier">T1</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">df_sa</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">lat</span>,<span class="identifier">lon</span>,<span class="identifier">T1</span><span class="paren">)</span>


<span class="identifier">sa</span> <span class="operator">&lt;-</span> <span class="identifier">get_googlemap</span><span class="paren">(</span><span class="identifier">center</span><span class="operator">=</span> <span class="identifier">c</span><span class="paren">(</span><span class="identifier">lon</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">98.493628</span>, <span class="identifier">lat</span> <span class="operator">=</span> <span class="number">29.424122</span><span class="paren">)</span>, <span class="identifier">maptype</span> <span class="operator">=</span> <span class="string">"roadmap"</span>,<span class="identifier">zoom</span> <span class="operator">=</span> <span class="number">11</span><span class="paren">)</span></code></pre></div>
<pre><code>## Map from URL : http://maps.googleapis.com/maps/api/staticmap?center=29.424122,-98.493628&amp;zoom=11&amp;size=640x640&amp;scale=2&amp;maptype=roadmap&amp;sensor=false</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3656" aria-expanded="false" aria-controls="rcode-643E0F3656"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3656"><pre class="r"><code class="r"><span class="identifier">ggmap</span><span class="paren">(</span><span class="identifier">sa</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_sa</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">lon</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">lat</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">T1</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span> <span class="identifier">ggtitle</span><span class="paren">(</span><span class="string">"Schools of San Antonio"</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning: Removed 38 rows containing missing values (geom_point).</code></pre>
<p><img src="./Project4_files/unnamed-chunk-22-1.png" width="672"></p>
<p>Looking at the map, it looks like schools not Title I eligible are centered towards North San Antonio.</p>
<p><strong>Radial Basis SVM</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3657" aria-expanded="false" aria-controls="rcode-643E0F3657"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3657"><pre class="r"><code class="r"><span class="identifier">tuned</span> <span class="operator">=</span> <span class="identifier">tune.svm</span><span class="paren">(</span><span class="identifier">T1</span><span class="operator">~</span>., <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_sa</span>,
                 <span class="identifier">cost</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">gamma</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">kernel</span> <span class="operator">=</span> <span class="string">"radial"</span>,
                 <span class="identifier">tunecontrol</span><span class="operator">=</span><span class="identifier">tune.control</span><span class="paren">(</span><span class="identifier">cross</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">best_gamma</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">gamma</span>
<span class="identifier">best_cost</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">cost</span>


<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">T1</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_sa</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="identifier">best_cost</span>,<span class="identifier">gamma</span><span class="operator">=</span><span class="identifier">best_gamma</span><span class="paren">)</span>
<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = T1 ~ ., data = df_sa, type = "C", kernel = "radial", 
##     cost = best_cost, gamma = best_gamma)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  10 
##       gamma:  5 
## 
## Number of Support Vectors:  159</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3658" aria-expanded="false" aria-controls="rcode-643E0F3658"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3658"><pre class="r"><code class="r"><span class="identifier">test</span> <span class="operator">&lt;-</span> <span class="identifier">df_sa</span>
<span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span> <span class="operator">&lt;-</span> <span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>, <span class="identifier">df_sa</span><span class="paren">)</span>

<span class="identifier">ggmap</span><span class="paren">(</span><span class="identifier">sa</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">test</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">lon</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">lat</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="identifier">pred</span>, <span class="identifier">shape</span> <span class="operator">=</span> <span class="identifier">T1</span><span class="paren">)</span>,<span class="identifier">size</span> <span class="operator">=</span> <span class="number">3</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">labs</span><span class="paren">(</span><span class="identifier">title</span> <span class="operator">=</span> <span class="string">"Radial Basis SVM Predictions"</span>,
       <span class="identifier">caption</span> <span class="operator">=</span> <span class="identifier">paste</span><span class="paren">(</span><span class="string">"Misclassification error = "</span>, <span class="identifier">toString</span><span class="paren">(</span><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<pre><code>## Warning: Removed 38 rows containing missing values (geom_point).</code></pre>
<p><img src="./Project4_files/unnamed-chunk-23-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3659" aria-expanded="false" aria-controls="rcode-643E0F3659"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3659"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.1311828</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3660" aria-expanded="false" aria-controls="rcode-643E0F3660"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3660"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span>,<span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span></code></pre></div>
<pre><code>##      
##        No Yes
##   No   28   3
##   Yes  58 376</code></pre>
<p>The SVM seems to pick up on the fact the schools in the North are less likely to be Title I eligible, but with a bias towards classifying the schools as eligible.</p>
</div><div id="section-los-angeles" class="section level3 tab-pane tabbed-pane fade" role="tabpanel">

<p>Finally let’s look at LA</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3661" aria-expanded="false" aria-controls="rcode-643E0F3661"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3661"><pre class="r"><code class="r"><span class="identifier">df_svm</span> <span class="operator">=</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="paren">)</span><span class="operator">|</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Location.City</span> <span class="operator">==</span> <span class="string">"LOS ANGELES"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">Longitude</span>, <span class="identifier">Latitude</span>, <span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">lat</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">lon</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span><span class="paren">)</span>
<span class="identifier">T1</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">df_la</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">lat</span>,<span class="identifier">lon</span>,<span class="identifier">T1</span><span class="paren">)</span>


<span class="identifier">la</span> <span class="operator">&lt;-</span> <span class="identifier">get_googlemap</span><span class="paren">(</span><span class="identifier">center</span><span class="operator">=</span> <span class="identifier">c</span><span class="paren">(</span><span class="identifier">lon</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">118.293685</span>, <span class="identifier">lat</span> <span class="operator">=</span> <span class="number">34.052234</span><span class="paren">)</span>, <span class="identifier">maptype</span> <span class="operator">=</span> <span class="string">"roadmap"</span>,<span class="identifier">zoom</span> <span class="operator">=</span> <span class="number">11</span><span class="paren">)</span></code></pre></div>
<pre><code>## Map from URL : http://maps.googleapis.com/maps/api/staticmap?center=34.052234,-118.293685&amp;zoom=11&amp;size=640x640&amp;scale=2&amp;maptype=roadmap&amp;sensor=false</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3662" aria-expanded="false" aria-controls="rcode-643E0F3662"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3662"><pre class="r"><code class="r"><span class="identifier">ggmap</span><span class="paren">(</span><span class="identifier">la</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_la</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">lon</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">lat</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">T1</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span> <span class="identifier">ggtitle</span><span class="paren">(</span><span class="string">"Schools of Los Angeles"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-24-1.png" width="672"></p>
<p>Los Angeles does not have many T1 eligible schools, which makes sense given the high cost of living. There is however a small cluster of T1 eligible schools in South West LA.</p>
<p><strong>Radial Basis SVM</strong></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3663" aria-expanded="false" aria-controls="rcode-643E0F3663"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3663"><pre class="r"><code class="r"><span class="identifier">tuned</span> <span class="operator">=</span> <span class="identifier">tune.svm</span><span class="paren">(</span><span class="identifier">T1</span><span class="operator">~</span>., <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_la</span>,
                 <span class="identifier">cost</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">gamma</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span>,
                 <span class="identifier">kernel</span> <span class="operator">=</span> <span class="string">"radial"</span>,
                 <span class="identifier">tunecontrol</span><span class="operator">=</span><span class="identifier">tune.control</span><span class="paren">(</span><span class="identifier">cross</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span><span class="paren">)</span>
<span class="identifier">best_gamma</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">gamma</span>
<span class="identifier">best_cost</span> <span class="operator">&lt;-</span> <span class="identifier">tuned</span><span class="operator">$</span><span class="identifier">best.model</span><span class="operator">$</span><span class="identifier">cost</span>


<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">T1</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_la</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="identifier">best_cost</span>,<span class="identifier">gamma</span><span class="operator">=</span><span class="identifier">best_gamma</span><span class="paren">)</span>
<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = T1 ~ ., data = df_la, type = "C", kernel = "radial", 
##     cost = best_cost, gamma = best_gamma)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  5 
##       gamma:  7 
## 
## Number of Support Vectors:  43</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3664" aria-expanded="false" aria-controls="rcode-643E0F3664"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3664"><pre class="r"><code class="r"><span class="identifier">test</span> <span class="operator">&lt;-</span> <span class="identifier">df_la</span>
<span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span> <span class="operator">&lt;-</span> <span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>, <span class="identifier">df_la</span><span class="paren">)</span>

<span class="identifier">ggmap</span><span class="paren">(</span><span class="identifier">la</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">geom_point</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">test</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">lon</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">lat</span>,<span class="identifier">colour</span> <span class="operator">=</span> <span class="identifier">pred</span>, <span class="identifier">shape</span> <span class="operator">=</span> <span class="identifier">T1</span><span class="paren">)</span>,<span class="identifier">size</span><span class="operator">=</span><span class="number">2</span><span class="paren">)</span> <span class="operator">+</span>
  <span class="identifier">ditch_the_axes</span> <span class="operator">+</span>
  <span class="identifier">labs</span><span class="paren">(</span><span class="identifier">title</span> <span class="operator">=</span> <span class="string">"Radial Basis SVM Predictions"</span>,
       <span class="identifier">caption</span> <span class="operator">=</span> <span class="identifier">paste</span><span class="paren">(</span><span class="string">"Misclassification error = "</span>, <span class="identifier">toString</span><span class="paren">(</span><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-25-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3665" aria-expanded="false" aria-controls="rcode-643E0F3665"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3665"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.024</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3666" aria-expanded="false" aria-controls="rcode-643E0F3666"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3666"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">test</span><span class="operator">$</span><span class="identifier">pred</span>,<span class="identifier">test</span><span class="operator">$</span><span class="identifier">T1</span><span class="paren">)</span></code></pre></div>
<pre><code>##      
##        No Yes
##   No    4   1
##   Yes  11 484</code></pre>
<p>The SVM seems to pick up on the small cluster in South West LA but does not do as well with the Title I eligble schools scattered throughout LA.</p>
</div><div id="section-texas" class="section level3 tab-pane tabbed-pane fade" role="tabpanel">

<p>Now let’s look at the Texas.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3667" aria-expanded="false" aria-controls="rcode-643E0F3667"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3667"><pre class="r"><code class="r"><span class="identifier">df_svm</span> <span class="operator">=</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="paren">)</span><span class="operator">|</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">State</span> <span class="operator">==</span> <span class="string">'Texas'</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">Longitude</span>, <span class="identifier">Latitude</span>, <span class="identifier">Title.1.Eligible</span>,<span class="identifier">Location.City</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">Longitude_Scaled</span> <span class="operator">=</span> <span class="identifier">Longitude</span><span class="operator">/</span><span class="number">3</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Latitude</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span> <span class="operator">&lt;-</span> <span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Longitude</span><span class="paren">)</span>
<span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_svm</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">ggplot</span><span class="paren">(</span><span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_svm</span>, <span class="identifier">mapping</span> <span class="operator">=</span> <span class="identifier">aes</span><span class="paren">(</span><span class="identifier">x</span><span class="operator">=</span><span class="identifier">Longitude</span>,<span class="identifier">y</span><span class="operator">=</span><span class="identifier">Latitude</span>,<span class="identifier">colour</span><span class="operator">=</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span><span class="paren">)</span> <span class="operator">+</span> <span class="identifier">geom_point</span><span class="paren">(</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-26-1.png" width="672"></p>
<p>Tuning the parameters with 10-fold CV is very slow but when I ran it, it returned cost = 5 and gamma = 10. I’ve included the code but commented it out in case you have a free 30 minutes and want to try it out for yourself.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3668" aria-expanded="false" aria-controls="rcode-643E0F3668"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3668"><pre class="r"><code class="r"><span class="comment"># Tuning is super slow so just trust me that it returned cost=5 and gamma=10</span>
<span class="comment">#tuned = tune.svm(Title.1.Eligible~Longitude_Scaled+Latitude, data = df_svm,</span>
<span class="comment">#                 cost = 2^2:10,</span>
<span class="comment">#                 gamma = 2^2:10,</span>
<span class="comment">#                 kernel = "radial",</span>
<span class="comment">#                 tunecontrol=tune.control(cross=10))</span>
<span class="comment">#best_gamma &lt;- tuned$best.model$gamma</span>
<span class="comment">#best_cost &lt;- tuned$best.model$cost</span>

<span class="comment">#svmfit=svm(Title.1.Eligible~Longitude_Scaled+Latitude,data=df_svm,type="C",kernel="radial",cost=best_cost,gamma=best_gamma)</span>
<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span><span class="identifier">Longitude</span><span class="operator">+</span><span class="identifier">Latitude</span>,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_svm</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,<span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,<span class="identifier">cost</span><span class="operator">=</span><span class="number">5</span>,<span class="identifier">gamma</span><span class="operator">=</span><span class="number">10</span><span class="paren">)</span>
<span class="identifier">print</span><span class="paren">(</span><span class="identifier">svmfit</span><span class="paren">)</span></code></pre></div>
<pre><code>## 
## Call:
## svm(formula = Title.1.Eligible ~ Longitude + Latitude, data = df_svm, 
##     type = "C", kernel = "radial", cost = 5, gamma = 10)
## 
## 
## Parameters:
##    SVM-Type:  C-classification 
##  SVM-Kernel:  radial 
##        cost:  5 
##       gamma:  10 
## 
## Number of Support Vectors:  3677</code></pre>
<p>The SVM seems to pick that schools not eligible for Title I funding tend to be centered around large cities, but does not do as well within those cities, which makes sense.</p>
</div><div id="section-us" class="section level3 tab-pane tabbed-pane fade" role="tabpanel">

<p>For now we will only look at elementary schools. About 81% of elementary schools in the US are Title I eligible, so we will use this as our baseline.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3669" aria-expanded="false" aria-controls="rcode-643E0F3669"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3669"><pre class="r"><code class="r"><span class="identifier">df_elem</span> <span class="operator">&lt;-</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">df_orig</span>, <span class="identifier">df_orig</span><span class="operator">$</span><span class="identifier">level</span> <span class="operator">==</span> <span class="string">'Primary School'</span><span class="paren">)</span> <span class="operator">%&gt;%</span> <span class="identifier">filter</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"Yes"</span><span class="operator">|</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">"No"</span><span class="paren">)</span>
<span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_elem</span>, <span class="identifier">df_elem</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">==</span> <span class="string">'Yes'</span><span class="paren">)</span><span class="paren">)</span><span class="operator">/</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_elem</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.8104093</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3670" aria-expanded="false" aria-controls="rcode-643E0F3670"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3670"><pre class="r"><code class="r"><span class="identifier">df_elem</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">df_elem</span>, <span class="identifier">State</span>, <span class="identifier">Location.City</span>,
                    <span class="identifier">Longitude</span>, <span class="identifier">Latitude</span>, <span class="identifier">Title.1.Eligible</span>, <span class="identifier">Total.Lunch</span>,
                   <span class="identifier">Full.Time.Teachers</span>, <span class="identifier">member</span>, <span class="identifier">am</span>, <span class="identifier">asian</span>, <span class="identifier">hisp</span>, <span class="identifier">black</span>, <span class="identifier">white</span>, <span class="identifier">pacific</span>, <span class="identifier">tr</span>, <span class="identifier">toteth</span><span class="paren">)</span>
<span class="identifier">df_elem_test_vars</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">df_elem</span>, <span class="identifier">Title.1.Eligible</span>, <span class="identifier">Total.Lunch</span>,
                            <span class="identifier">Full.Time.Teachers</span>, <span class="identifier">am</span>, <span class="identifier">asian</span>, <span class="identifier">hisp</span>, <span class="identifier">black</span>, <span class="identifier">white</span>, <span class="identifier">pacific</span>, <span class="identifier">tr</span>, <span class="identifier">toteth</span><span class="paren">)</span>
<span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">subset</span><span class="paren">(</span><span class="identifier">df_elem</span>, <span class="identifier">df_elem</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="operator">==</span><span class="string">"Yes"</span><span class="paren">)</span><span class="paren">)</span><span class="operator">/</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_elem</span><span class="paren">)</span> <span class="comment"># Base line = 81 %</span></code></pre></div>
<pre><code>## [1] 0.8104093</code></pre>
<p><strong>Decision Tree</strong></p>
<p>First we run a basic decision tree.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3671" aria-expanded="false" aria-controls="rcode-643E0F3671"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3671"><pre class="r"><code class="r"><span class="keyword">require</span><span class="paren">(</span><span class="identifier">tree</span><span class="paren">)</span>
<span class="identifier">dim</span><span class="paren">(</span><span class="identifier">df_elem_test_vars</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 52107    11</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3672" aria-expanded="false" aria-controls="rcode-643E0F3672"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3672"><pre class="r"><code class="r"><span class="identifier">df_elem_test_vars</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_elem_test_vars</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">elem_tree</span> <span class="operator">&lt;-</span> <span class="identifier">tree</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span>., <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_elem_test_vars</span><span class="paren">)</span>
<span class="identifier">plot</span><span class="paren">(</span><span class="identifier">elem_tree</span><span class="paren">)</span>
<span class="identifier">text</span><span class="paren">(</span><span class="identifier">elem_tree</span>,<span class="identifier">pretty</span><span class="operator">=</span><span class="number">0</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-29-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3673" aria-expanded="false" aria-controls="rcode-643E0F3673"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3673"><pre class="r"><code class="r"><span class="identifier">elem_tree</span></code></pre></div>
<pre><code>## node), split, n, deviance, yval, (yprob)
##       * denotes terminal node
## 
##  1) root 52107 50610 Yes ( 0.18959 0.81041 )  
##    2) Total.Lunch &lt; 182.5 26233 32630 Yes ( 0.31354 0.68646 )  
##      4) asian &lt; 4.5 13431 13120 Yes ( 0.19157 0.80843 )  
##        8) Full.Time.Teachers &lt; 5.235 2185  3019 Yes ( 0.46682 0.53318 ) *
##        9) Full.Time.Teachers &gt; 5.235 11246  9030 Yes ( 0.13809 0.86191 ) *
##      5) asian &gt; 4.5 12802 17570 Yes ( 0.44149 0.55851 )  
##       10) hisp &lt; 174.5 11008 15260 Yes ( 0.49755 0.50245 ) *
##       11) hisp &gt; 174.5 1794  1147 Yes ( 0.09755 0.90245 ) *
##    3) Total.Lunch &gt; 182.5 25874 12300 Yes ( 0.06393 0.93607 )  
##      6) asian &lt; 7.5 15673  3919 Yes ( 0.02724 0.97276 ) *
##      7) asian &gt; 7.5 10201  7497 Yes ( 0.12028 0.87972 )  
##       14) Total.Lunch &lt; 304.5 4209  4508 Yes ( 0.22689 0.77311 ) *
##       15) Total.Lunch &gt; 304.5 5992  2214 Yes ( 0.04539 0.95461 ) *</code></pre>
<p>The decision tree tags all the schools as eligible. Evidently there is too much noise in the data.</p>
<p><strong>Random Forest</strong></p>
<p>Let’s use a random forest to determine the most important predictors.Again this is hard coded to make it run faster.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3674" aria-expanded="false" aria-controls="rcode-643E0F3674"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3674"><pre class="r"><code class="r"><span class="keyword">require</span><span class="paren">(</span><span class="identifier">randomForest</span><span class="paren">)</span>
<span class="identifier">set.seed</span><span class="paren">(</span><span class="number">11</span><span class="paren">)</span>
<span class="comment">#train_vars=sample(1:nrow(df_elem_test_vars),36474) # 70% of data</span>
<span class="comment">#rf.elem = randomForest(Title.1.Eligible ~ . ,data=df_elem_test_vars, subset=train_vars)</span>
<span class="comment">#rf.elem$importance</span>
<span class="comment">#varImpPlot(rf.elem,</span>
<span class="comment">#           sort = T,</span>
<span class="comment">#           main="Variable Importance",</span>
<span class="comment">#           pch = 19,</span>
<span class="comment">#           col = 'blue')</span></code></pre></div>
<p>Total number of students that are eligible for free/reduced lunch, number of full time teachers, number of white students, and number of minority students are the most important predictors for Title I eligibility. Let’s take the 4 most important.</p>
<p>I tested for the optimal number of predictors sampled for splitting at each node in a random forest, but the code is very slow. It is included commented out but the result is hard coded.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3675" aria-expanded="false" aria-controls="rcode-643E0F3675"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3675"><pre class="r"><code class="r"><span class="identifier">df_elem1</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">df_elem</span>, <span class="identifier">Title.1.Eligible</span>, <span class="identifier">Total.Lunch</span>,
                   <span class="identifier">Full.Time.Teachers</span>, <span class="identifier">toteth</span>, <span class="identifier">white</span><span class="paren">)</span>
<span class="identifier">df_elem1</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span> <span class="operator">&lt;-</span> <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">df_elem1</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span>
<span class="identifier">dim</span><span class="paren">(</span><span class="identifier">df_elem1</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 52107     5</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3676" aria-expanded="false" aria-controls="rcode-643E0F3676"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3676"><pre class="r"><code class="r"><span class="identifier">train</span><span class="operator">=</span><span class="identifier">sample</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df_elem1</span><span class="paren">)</span>,<span class="number">36474</span><span class="paren">)</span> <span class="comment"># 70% of data</span>
<span class="comment"># Testing number of predictors sampled for spliting at each node</span>
<span class="comment">#test.err=double(4)</span>
<span class="comment">#for(mtry in 1:4){</span>
<span class="comment">#  fit=randomForest(Title.1.Eligible~.,data=df_elem1,subset=train,mtry=mtry)</span>
<span class="comment">#  pred=predict(fit,df_elem1[-train,])</span>
<span class="comment">#  test.err[mtry]=mean(pred!=df_elem1[-train,]$Title.1.Eligible)</span>
<span class="comment">#  cat(mtry," ")</span>
<span class="comment">#}</span>
<span class="identifier">test.err</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span><span class="number">0.1475085</span>, <span class="number">0.1497473</span>, <span class="number">0.1506429</span>, <span class="number">0.1511546</span><span class="paren">)</span>
<span class="identifier">matplot</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span>,<span class="identifier">test.err</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span>,<span class="identifier">col</span><span class="operator">=</span><span class="string">"blue"</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"b"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Misclassification Error"</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"mtry"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-31-1.png" width="672"></p>
<p>Looking at the graph, the optimal mtry is 1. Let’s try it out:</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3677" aria-expanded="false" aria-controls="rcode-643E0F3677"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3677"><pre class="r"><code class="r"><span class="identifier">min_mtry</span><span class="operator">&lt;-</span> <span class="identifier">which.min</span><span class="paren">(</span><span class="identifier">test.err</span><span class="paren">)</span>
<span class="identifier">fit</span><span class="operator">=</span><span class="identifier">randomForest</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_elem1</span>,<span class="identifier">subset</span><span class="operator">=</span><span class="identifier">train</span>,<span class="identifier">mtry</span><span class="operator">=</span><span class="identifier">min_mtry</span><span class="paren">)</span>
<span class="identifier">fit</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = Title.1.Eligible ~ ., data = df_elem1,      mtry = min_mtry, subset = train) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 1
## 
##         OOB estimate of  error rate: 14.5%
## Confusion matrix:
##       No   Yes class.error
## No  3441  3497  0.50403575
## Yes 1792 27744  0.06067172</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3678" aria-expanded="false" aria-controls="rcode-643E0F3678"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3678"><pre class="r"><code class="r"><span class="identifier">pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">fit</span>,<span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="paren">)</span>
<span class="identifier">mean</span><span class="paren">(</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.1433506</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3679" aria-expanded="false" aria-controls="rcode-643E0F3679"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3679"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">pred</span><span class="operator">==</span><span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.8566494</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3680" aria-expanded="false" aria-controls="rcode-643E0F3680"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3680"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">pred</span>, <span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>##      
## pred     No   Yes
##   No   1447   747
##   Yes  1494 11945</code></pre>
<p>This produces a slightly higher sccuracy rate than the baseline. Again I tested for the optimal number of trees but because it is slow, the code is commented out and the result is hard coded.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3681" aria-expanded="false" aria-controls="rcode-643E0F3681"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3681"><pre class="r"><code class="r"><span class="comment">#tree.error = double(10)</span>
<span class="identifier">numTrees</span> <span class="operator">&lt;-</span> <span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="operator">*</span><span class="number">20</span>
<span class="comment">#for(i in 1:10){</span>
<span class="comment">#  fit=randomForest(Title.1.Eligible~.,data=df_elem1,subset=train,ntree=numTrees[i],mtry = min_mtry)</span>
<span class="comment">#  pred=predict(fit,df_elem1[-train,])</span>
<span class="comment">#  tree.error[i]=mean(pred!=df_elem1[-train,]$Title.1.Eligible)</span>
<span class="comment">#  cat(numTrees[i]," ")</span>
<span class="comment">#}</span>
<span class="identifier">tree.error</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span> <span class="number">0.1538412</span>, <span class="number">0.1521141</span>, <span class="number">0.1506429</span>, <span class="number">0.1498113</span>, <span class="number">0.1494915</span>, <span class="number">0.1482121</span>, <span class="number">0.1466769</span>, <span class="number">0.1478283</span>, <span class="number">0.1471886</span>, <span class="number">0.1484040</span><span class="paren">)</span>
<span class="identifier">matplot</span><span class="paren">(</span><span class="identifier">numTrees</span>,<span class="identifier">tree.error</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span>,<span class="identifier">col</span><span class="operator">=</span><span class="string">"blue"</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"b"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Misclassification Error"</span>,<span class="identifier">xlab</span> <span class="operator">=</span> <span class="string">"Number of Trees"</span><span class="paren">)</span></code></pre></div>
<p><img src="./Project4_files/unnamed-chunk-33-1.png" width="672"></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3682" aria-expanded="false" aria-controls="rcode-643E0F3682"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3682"><pre class="r"><code class="r"><span class="identifier">min_tree</span> <span class="operator">&lt;-</span> <span class="identifier">numTrees</span><span class="paren">[</span><span class="identifier">which.min</span><span class="paren">(</span><span class="identifier">tree.error</span><span class="paren">)</span><span class="paren">]</span>
<span class="identifier">fit</span><span class="operator">=</span><span class="identifier">randomForest</span><span class="paren">(</span><span class="identifier">Title.1.Eligible</span><span class="operator">~</span>.,<span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_elem1</span>,<span class="identifier">subset</span><span class="operator">=</span><span class="identifier">train</span>,<span class="identifier">ntree</span><span class="operator">=</span><span class="identifier">numTrees</span><span class="paren">[</span><span class="identifier">which.min</span><span class="paren">(</span><span class="identifier">tree.error</span><span class="paren">)</span><span class="paren">]</span>,<span class="identifier">mtry</span><span class="operator">=</span><span class="identifier">min_mtry</span><span class="paren">)</span>
<span class="identifier">fit</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = Title.1.Eligible ~ ., data = df_elem1,      ntree = numTrees[which.min(tree.error)], mtry = min_mtry,      subset = train) 
##                Type of random forest: classification
##                      Number of trees: 140
## No. of variables tried at each split: 1
## 
##         OOB estimate of  error rate: 14.62%
## Confusion matrix:
##       No   Yes class.error
## No  3416  3522  0.50763909
## Yes 1811 27725  0.06131501</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3683" aria-expanded="false" aria-controls="rcode-643E0F3683"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3683"><pre class="r"><code class="r"><span class="identifier">pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">fit</span>,<span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="paren">)</span>
<span class="identifier">mean</span><span class="paren">(</span><span class="identifier">pred</span><span class="operator">!=</span><span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.1437984</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3684" aria-expanded="false" aria-controls="rcode-643E0F3684"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3684"><pre class="r"><code class="r"><span class="identifier">mean</span><span class="paren">(</span><span class="identifier">pred</span><span class="operator">==</span><span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.8562016</code></pre>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3685" aria-expanded="false" aria-controls="rcode-643E0F3685"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3685"><pre class="r"><code class="r"><span class="identifier">table</span><span class="paren">(</span><span class="identifier">pred</span>, <span class="identifier">df_elem1</span><span class="paren">[</span><span class="operator">-</span><span class="identifier">train</span>,<span class="paren">]</span><span class="operator">$</span><span class="identifier">Title.1.Eligible</span><span class="paren">)</span></code></pre></div>
<pre><code>##      
## pred     No   Yes
##   No   1447   754
##   Yes  1494 11938</code></pre>
<p>This does not significantly improve the accuracy rate.</p>
<!-- ## Decision Tree to Predict student teacher ratio -->
<!-- https://data.world/wangweiyi722/f-17-eda-project-4/insights/534ac60e-0e94-4847-92fd-d4caab010afd -->
<!-- I wanted to see if we could determine whether there was a high student teacher ratio or a low student teacher ratio using our other factors. First we had to create the student teacher ratio which is simply the number of students divided by the number of teachers. For this data set we focused on primary schools in Texas. Running every school in the US would take an extremely long time. Additionally, we wanted to be consistent by only using primary school, because it is likely that the optimal student teacher ratio for primary school is different from high school and university. We than set less than 16 as a small student teacher ratio and 16 and larger as a larger student teacher ratio. We than created our tree. -->
<!-- ```{r results='hide', message=FALSE, warning=FALSE} -->
<!-- require(MASS) -->
<!-- require(tidyverse) -->
<!-- require(dplyr) -->
<!-- require(data.world) -->
<!-- require(ggplot2) -->
<!-- require(boot) -->
<!-- require(tree) -->
<!-- library(e1071) -->
<!-- project<- "https://data.world/wangweiyi722/f-17-eda-project-4" -->
<!-- data.world::set_config(cfg_env("DW_API")) -->
<!-- Edf <- data.world::query( -->
<!--   data.world::qry_sql("SELECT full_time_teachers, level, member, asian, hisp, black, white, pacific, total_lunch, am, title_1_eligible, urban_locale, latitude, location_city, county_name, longitude FROM SchoolSurvey where State ='Texas'"), -->
<!--   dataset = project -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r results='hide', message=FALSE, warning=FALSE} -->
<!-- Edf1 = dplyr::filter(Edf, Edf$full_time_teachers>1) -->
<!-- Edf1 = dplyr::mutate(Edf1, stratio = if_else(member/full_time_teachers <= 16,'small','large')) -->
<!-- #Edf1 = dplyr::select(Edf1, - reconstituted_year) -->
<!-- Edf1%>% drop_na() -->
<!-- Edf2 = dplyr:: filter(Edf1, level == "Primary School") -->
<!-- stratio1 = Edf2$stratio -->
<!-- Edf2 = data.frame(Edf2,stratio1) -->
<!-- train =sample(1:nrow(Edf2),3500) -->
<!-- tree1 = tree(stratio1~ .- member - stratio1 -full_time_teachers,data=Edf2,subset=train) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #summary(tree1) -->
<!-- plot(tree1) -->
<!-- text(tree1,pretty=0) -->
<!-- tree.pred=predict(tree1,Edf2[-train,],type="class") -->
<!-- with(Edf2[-train,],table(tree.pred,stratio1)) -->
<!-- ``` -->
<!-- Our results are about 69.3% accurate. We get pretty good results; however I wanted to see how race specifically plays a factor in student teacher ratios so we ran the code again but only looked at the number of students by race in each of the schools. -->
<!-- The results are as follows: -->
<!-- ```{r} -->
<!-- tree2 <- tree(stratio1~ asian+hisp+black+white+pacific+total_lunch+am,data=Edf2,subset=train) -->
<!-- #summary(tree2) -->
<!-- plot(tree2) -->
<!-- text(tree2,pretty=0) -->
<!-- tree.pred1=predict(tree1,Edf2[-train,],type="class") -->
<!-- with(Edf2[-train,],table(tree.pred1,stratio1)) -->
<!-- ``` -->
<!-- We get a ration of about 69.5% which is virtually the same. However when we look at the tree. We can see the main factors that drive the tree are the number of Hispanics at are particular school. Its possible that it is likely in minority communities the student teacher ratio is especially high in relations to more affluent communities -->
<!-- ## Subsidized Lunch and number of teachers predicting Title 1 Eligibility using SVM -->
<!-- https://data.world/wangweiyi722/f-17-eda-project-4/insights/0d1b9b1e-f71e-4a09-bd2b-36db4536d023 -->
<!-- We wanted to try the SVM function, and we wanted to try it by looking at students who received subsidized lunches and the faculty size relate to Title 1 Eligibility. We wanted to standardize the number of students who receive subsidized lunches so we dividend the number by the number of students and labeled it lunchperc. Additionally, in order to have good visibility on the graph we only selected data on primary schools in Dallas. Just to get an idea of what it would look like the graph goes as follows: -->
<!-- ```{r} -->
<!-- Edf1sm = dplyr::filter(Edf, full_time_teachers>1, total_lunch >0, level != 'Other', location_city == 'DALLAS') -->
<!-- Edf1sm = dplyr::mutate (Edf1sm, lunchperc = total_lunch/member) -->
<!-- #Edf1sm = dplyr::select(Edf1sm, - reconstituted_year) -->
<!-- ggplot(Edf1sm, aes(x =lunchperc , y = full_time_teachers, colour = title_1_eligible))+geom_point() -->
<!-- ``` -->
<!-- Now that we know how the code looks we will run the code to get our SVM model, and it as follows. -->
<!-- ```{r} -->
<!-- xy = dplyr::select(Edf1sm, full_time_teachers, lunchperc, title_1_eligible) -->
<!-- xy$title_1_eligible <- as.factor(xy$title_1_eligible) -->
<!-- svmfit=svm(title_1_eligible~full_time_teachers+lunchperc,data=xy, type="C", kernel="linear",cost=10 ,scale=FALSE) -->
<!-- #print(svmfit) -->
<!-- plot(svmfit, xy) -->
<!-- ``` -->
<!-- We can see that the model does a pretty good job of cutting the data, and from a quick look we can see that the model was able to group the two sides: Yes and No for title 1 eligibility -->
<!-- ## Urban Locale - K-Means Clustering Unsupervised Learning -->
<!-- https://data.world/wangweiyi722/f-17-eda-project-4/insights/e7a284c0-e7f5-437f-ad31-d121432fdf65 -->
<!-- For this insight, I wanted to create a K-means clustering to see if we can predict which locale whether it be the Large, mid-size, or small city. The predictors for this is longitude and latitude, and we are all looking at just Dallas County. -->
<!-- We first want to start off by visualizing the data, and it goes as follows: -->
<!-- ```{r} -->
<!-- Edf1cl = dplyr::filter(Edf, full_time_teachers>1, total_lunch >0, level != 'Other', county_name == 'DALLAS COUNTY', grepl('City', urban_locale)) -->
<!-- Edf2cl = dplyr::select(Edf1cl, latitude, longitude, urban_locale) -->
<!-- Edf2clb = dplyr::select(Edf1cl, latitude, longitude) -->
<!-- ggplot(Edf2cl, aes(x =latitude, y = longitude, colour = urban_locale))+geom_point() -->
<!-- ``` -->
<!-- Now we can begin the kmeans clustering -->
<!-- ```{r results='hide'} -->
<!-- km.out=kmeans(Edf2clb,3,nstart=15) -->
<!-- km.out$cluster -->
<!-- ``` -->
<!-- ```{r} -->
<!-- ggplot(Edf2cl, aes(x=latitude, y=longitude, colour = as.factor(km.out$cluster))) + geom_point() -->
<!-- ``` -->
<!-- The model seems like it did a pretty good job, however, the large city is underestimated and the mid-size and the small city are over estimated. -->
<!-- Now we want to look out to see how far from the center, these clusters are: the Code and graph is as follows -->
<!-- ```{r} -->
<!-- Edf2clc <- data.frame(km.out$centers, km.out$size) -->
<!-- #names(Edf2clc) -->
<!-- Edf2cl %>% ggplot() + geom_point(mapping = aes(x=latitude, y=longitude, colour = as.factor(km.out$cluster))) + geom_point(data=Edf2clc, mapping=aes(latitude, longitude, size=km.out.size)) -->
<!-- ``` -->
<!-- We can see that the Large City has by far the larges KM.out.size. It looks like KM can do a fairly good job of creating clusters for this particular grouping -->
<!-- ## Urban Locale - Hierarchical Clustering Unsupervised Learning -->
<!-- https://data.world/wangweiyi722/f-17-eda-project-4/insights/fbcab591-0a52-4c96-a27d-a5afbc6f1bfc -->
<!-- Next I wanted to try Hierarchical Clustering for the Unsupervised Learning.  I wanted to start off by looking at Hierarchical Clustering for the complete, single and average cases: It goes as follows: -->
<!-- ```{r} -->
<!-- hc.complete=hclust(dist(Edf2clb),method="complete") -->
<!-- plot(hc.complete) -->
<!-- hc.single=hclust(dist(Edf2clb),method="single") -->
<!-- plot(hc.single) -->
<!-- hc.average=hclust(dist(Edf2clb),method="average") -->
<!-- plot(hc.average) -->
<!-- ``` -->
<!-- We know that there are only three possible results that can be predicted: the city can be small, mid-size, or large. The Complete case appears that there are 3 clusters, the Single case appears there there are much more than 3 clusters, and the Average case appears that there are about 3-4 clusters. It seems like the Complete Case would be the best option. So know we will do the clustering. -->
<!-- ```{r} -->
<!-- Edf2cld = dplyr::select(Edf1cl, urban_locale) -->
<!-- Edf2cld = dplyr::mutate(Edf2cld, urban_locale_123 = ifelse(urban_locale == 'City, Large', 1, ifelse(urban_locale == 'City, Mid-size',2,3))) -->
<!-- Edf2cld = dplyr::select(Edf2cld, urban_locale_123) -->
<!-- Edf2cld_list = data.matrix(Edf2cld) -->
<!-- hc.cut=cutree(hc.complete,3) -->
<!-- table(hc.cut,Edf2cld_list) -->
<!-- plot(hc.complete,labels=Edf2cld_list) -->
<!-- ``` -->
<!-- In this case the results are quite poor. -->
</div></div>





</div>
<div id="section-do-all-eligible-schools-receive-title-1-funding" class="section level2">
<div name="do_all_eligible_schools_receive_title_1_funding" data-unique="do_all_eligible_schools_receive_title_1_funding"></div><h2><strong>Do all eligible schools receive Title 1 funding?</strong></h2>
<p>Under the 2010 renewal of the Elementary and Secondary Education Act, do eligible schools always receive Title 1 funding? The answer is no. In the state of Texas, approx. 73% of eligible middle and high schools do not receive Title 1 funding, whereas 95% of eligible Texas elementary schools (here meaning schools that accept kids aged 10 or younger) do. By contrast, in California, 100% of eligible schools receive funding unobstructed. The natural inference is that state law determines whether a school receives Title 1 funding.</p>
<p>In the following sections of the RMD, I outline the developing understanding of the data that led me to that inference. I’ll look especially at Texas data to try to suss out the contours of Texas law on Title 1.</p>
</div>
<div id="section-eligible-schools-pt.-1" class="section level2">
<div name="eligible_schools,_pt_1" data-unique="eligible_schools,_pt_1"></div><h2><strong>Eligible schools, pt. 1</strong></h2>
<p>Link: <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/0ad9aa40-1c7c-4142-866b-d04db62de18b" class="uri">https://data.world/wangweiyi722/f-17-eda-project-4/insights/0ad9aa40-1c7c-4142-866b-d04db62de18b</a></p>
<p><em>In this insight, I had not yet realized that state law played a determining role; consequently, I looked at the data for all states included in the dataset. Moreover, I assumed that the schools themselves decided whether or not to accept Title 1 funding rather than following state law; therefore, my language reflects that assumption.</em></p>
<p><strong>Introduction</strong></p>
<p>By filtering our dataset, I discovered that even if a school is eligible for Title 1 funding–i.e.&nbsp;they qualify for targeted assistance (TAS) or schoolwide programs (SWP)–the school will sometimes decline both options, preferring not to take any Title 1 funding.</p>
<p>To use terms from our dataset, these are schools with both of the following:</p>
<ul>
<li><code>Title 1 Eligible</code> == “Yes”</li>
<li><code>Title 1 Status</code> == “Eligible for TAS but provides no program” || Title 1 Status == “Eligible for SWP bur povides <em>[sic]</em> no program”</li>
</ul>
<p>I decided to use boosting trees to find the most important influences on a school’s decision. I used a subset of variables that I thought might have an effect.</p>
<p>My hypothesis was that the school’s region, represented in <code>region_code</code>, would have a big influence: conservative states in the South might be more resistant to taking federal funding for education. Note that <code>region_code</code> works by taking the first digit of the school’s zip code. You can see the effect in the map below:</p>
<div class="figure">
<img src="./Project4_files/400px-ZIP_Code_zones.svg.png">

</div>
<p><strong>Boosting</strong></p>
<p>The most influential variables in determining a school’s decision are listed below.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3686" aria-expanded="false" aria-controls="rcode-643E0F3686"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3686"><pre class="r"><code class="r"><span class="comment"># Note: For some reason I had to put as.factor() around my categorical variables in order to get the boosting function to work with them.</span>

<span class="identifier">train</span><span class="operator">=</span><span class="identifier">sample</span><span class="paren">(</span><span class="number">1</span><span class="operator">:</span><span class="identifier">nrow</span><span class="paren">(</span><span class="identifier">df.n</span><span class="paren">)</span>,<span class="number">46390</span><span class="paren">)</span> <span class="comment"># 70% of data</span>
<span class="identifier">df_train</span><span class="operator">=</span><span class="identifier">df.n</span><span class="paren">[</span><span class="identifier">train</span>,<span class="paren">]</span> <span class="operator">%&gt;%</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">substr</span><span class="paren">(</span><span class="identifier">state</span>,<span class="number">1</span>,<span class="number">1</span><span class="paren">)</span><span class="operator">&lt;</span><span class="string">'N'</span><span class="paren">)</span> <span class="comment"># In order to avoid having `state` be a predictor with &gt; 32 levels, which would break my tree operations</span>

<span class="identifier">boost.program</span><span class="operator">=</span><span class="identifier">gbm</span><span class="paren">(</span>
  <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">has_program</span><span class="paren">)</span><span class="operator">~</span>
    <span class="identifier">hisp</span><span class="operator">+</span> <span class="comment"># Number of Hispanics</span>
    <span class="identifier">white</span><span class="operator">+</span> <span class="comment"># Number of whites</span>
    <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">lowest_grade</span><span class="paren">)</span><span class="operator">+</span>
    <span class="identifier">region_code</span><span class="operator">+</span> <span class="comment"># Custom var: what part of the country the school is in</span>
    <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">state</span><span class="paren">)</span>,
  <span class="identifier">data</span><span class="operator">=</span><span class="identifier">df_train</span>,
  <span class="identifier">distribution</span><span class="operator">=</span><span class="string">"gaussian"</span>,
  <span class="identifier">n.trees</span><span class="operator">=</span><span class="number">1000</span>,
  <span class="identifier">shrinkage</span><span class="operator">=</span><span class="number">0.01</span>,
  <span class="identifier">interaction.depth</span><span class="operator">=</span><span class="number">4</span><span class="paren">)</span></code></pre></div>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3687" aria-expanded="false" aria-controls="rcode-643E0F3687"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3687"><pre class="r"><code class="r"><span class="identifier">relinf</span><span class="operator">=</span><span class="identifier">sum</span><span class="operator">$</span><span class="identifier">rel.inf</span>
<span class="identifier">kable</span><span class="paren">(</span><span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">as.character</span><span class="paren">(</span><span class="identifier">sum</span><span class="operator">$</span><span class="identifier">var</span><span class="paren">)</span>,<span class="identifier">relinf</span><span class="paren">)</span>, <span class="identifier">format</span><span class="operator">=</span><span class="string">"markdown"</span><span class="paren">)</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">as.character.sum.var.</th>
<th align="right">relinf</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">as.factor(state)</td>
<td align="right">48.412641</td>
</tr>
<tr class="even">
<td align="left">as.factor(lowest_grade)</td>
<td align="right">36.277230</td>
</tr>
<tr class="odd">
<td align="left">white</td>
<td align="right">12.201286</td>
</tr>
<tr class="even">
<td align="left">hisp</td>
<td align="right">3.105113</td>
</tr>
<tr class="odd">
<td align="left">region_code</td>
<td align="right">0.003731</td>
</tr>
</tbody>
</table>
<p><em>Note: For this document, I didn’t use all the variables I used for the <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/0ad9aa40-1c7c-4142-866b-d04db62de18b">insight</a>, because I didn’t want it to take forever to load. In the boosting table above, the top three variables are the same in the insight and here.</em></p>
<p>The results indicate that by far the most important variables were <code>lowest_grade</code> (the lowest grade offered, e.g.&nbsp;kindergarten or 9th grade), <code>state</code> (the state in which the school is located), and <code>white</code> (the number of white students at the school).</p>
<p><strong>Interpretation</strong></p>
<p>Those results were surprising and interesting. I discuss them more in the <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/0ad9aa40-1c7c-4142-866b-d04db62de18b">insight</a>, but by far the most important result for my research was <code>state</code>.</p>
<p>The influence of <code>state</code> was my first clue as to the importance of state law. I was beginning to realize that state law determined whether eligible schools accepted or declined Title 1 funding–i.e., that schools weren’t really the ones making the decision.</p>
<p><code>Lowest_grade</code> and <code>white</code> seemed strange to me, like perhaps they were standing in for other, more relevant predictors. But in any case, they had proven more influential than those other predictors, so I decided to use them anyway.</p>
<p>It’s important to note that the boosting table shows the <em>relative</em> influence of the variables, i.e.&nbsp;how influential they were relative to one another. In the next section, I built a model to determine whether they were actually any good at predicting whether an eligible school would or wouldn’t receive funding.</p>
</div>
<div id="section-eligible-schools-pt.-2" class="section level2">
<div name="eligible_schools,_pt_2" data-unique="eligible_schools,_pt_2"></div><h2><strong>Eligible schools, pt. 2</strong></h2>
<p>Link: <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/75042a41-87b9-4115-a5a5-a33709eadc78" class="uri">https://data.world/wangweiyi722/f-17-eda-project-4/insights/75042a41-87b9-4115-a5a5-a33709eadc78</a></p>
<p><strong>Introduction</strong></p>
<p>I had realized that state law might determine whether a school received or didn’t receive funding, so I came up with a new hypothesis:</p>
<p><em>Each school fits into some category under state law, and the category determines whether they accept or decline funding. That means that if we can understand what category the school fits into, we should be able to predict whether it accepts or declines.</em></p>
<p>To make the predictions, I took the three most important variables from last time–<code>lowest_grade</code>, <code>state</code>, and <code>white</code>–and put them in action in a decision tree. It’s important to note that at this point I was still using data from all states rather than narrowing my focus to one state.</p>
<p><strong>Decision Tree</strong></p>
<p><em>Note: In this section, my numbers end up being slightly different than in the original <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/75042a41-87b9-4115-a5a5-a33709eadc78">insight</a>. The reason is that for this RMD, I stopped using a bunch of predictors I didn’t consider useful, and consequently I was able to pull a data frame with a much higher number of observations. Therefore, the training data set is far larger in terms of raw numbers in the RMD than in the insight.</em></p>
<p>After creating the decision tree, I first evaluated its performance by looking at its rate of correct predictions.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3688" aria-expanded="false" aria-controls="rcode-643E0F3688"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3688"><pre class="r"><code class="r"><span class="identifier">tree1</span> <span class="operator">&lt;-</span> <span class="identifier">tree</span><span class="paren">(</span>
  <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">has_program</span><span class="paren">)</span><span class="operator">~</span>
    <span class="identifier">white</span><span class="operator">+</span>
    <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">lowest_grade</span><span class="paren">)</span><span class="operator">+</span>
    <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">state</span><span class="paren">)</span>, 
  <span class="identifier">data</span> <span class="operator">=</span> <span class="identifier">df_train</span><span class="paren">)</span>

<span class="identifier">tree1.pred</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">tree1</span>,<span class="identifier">df_train</span>,<span class="identifier">type</span><span class="operator">=</span><span class="string">"class"</span><span class="paren">)</span>
<span class="identifier">mean</span><span class="paren">(</span><span class="identifier">tree1.pred</span><span class="operator">==</span><span class="identifier">df_train</span><span class="operator">$</span><span class="identifier">has_program</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.8790594</code></pre>
<p>Overall, the tree’s rate of accurate prediction was in the high 80s–indicating a quite strong model. That seemed to suggest my hypothesis was right: we could predict a school’s decision.</p>
<p>Luckily, I had my wits about me, and I decided to look at a confusion matrix to confirm that the model performed well:</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3689" aria-expanded="false" aria-controls="rcode-643E0F3689"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3689"><pre class="r"><code class="r"><span class="identifier">with</span><span class="paren">(</span><span class="identifier">df_train</span>,<span class="identifier">table</span><span class="paren">(</span><span class="identifier">tree1.pred</span>,<span class="identifier">df_train</span><span class="operator">$</span><span class="identifier">has_program</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<pre><code>##           
## tree1.pred    No   Yes
##        No   3003  1567
##        Yes  1349 18192</code></pre>
<p>In that table, the vertical margin is the school’s actual acceptance/declination and the horizontal margin is the school’s predicted acceptance/declination.</p>
<p>The confusion matrix tells us that the tree did very well at predicting true positives: it very seldom guessed that the school did take funding when in actuality the school didn’t take funding. However, when the tree predicted that the school would decline the funding, it wrong approx. 30% of the time. That’s not a very good record, despite the tree’s low misclassification error overall.</p>
<p>So was our tree actually any good? To find out, I decided to test against a null hypothesis.</p>
<p><strong>Testing Against Null</strong></p>
<p>I calculated the ratio of Actual Yes to Actual No in the training set, and found it to be about 80%. That is, eligible schools accepted Title 1 funding approximately 80% of the time.</p>
<p>In that case, we might expect a successful classification rate of ~80% for a model that simply guessed Yes every time. To test this null hypothesis, I wrote some simple R code:</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3690" aria-expanded="false" aria-controls="rcode-643E0F3690"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3690"><pre class="r"><code class="r"><span class="identifier">df2</span> <span class="operator">=</span> <span class="identifier">df.n</span> <span class="operator">%&gt;%</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">null</span><span class="operator">=</span><span class="string">"Yes"</span><span class="paren">)</span>
<span class="identifier">mean</span><span class="paren">(</span><span class="identifier">df2</span><span class="operator">$</span><span class="identifier">null</span><span class="operator">==</span><span class="identifier">df2</span><span class="operator">$</span><span class="identifier">has_program</span><span class="paren">)</span></code></pre></div>
<pre><code>## [1] 0.7978301</code></pre>
<p>As expected, testing the null hypothesis showed that a model that simply predicted Yes every time would be correct about 80% of the time. That means our model, with its rate of successful prediction in the upper 80s, only improved on the null by a few percentage points.</p>
<p>And even those few percentage points may not mean much. Remember that the null simply guessed Yes every time. It’s reasonable, then, to think that our model only improved on the null because it occasionally guessed No. But the confusion matrix tells us that when our model did guess No, it was wrong around 30% of the time. That’s better than 50-50, but it’s still not very accurate predicting.</p>
<p><strong>Interpretation</strong></p>
<p>Either the model or the variables were flawed. Could it be that <code>lowest_grade</code>, <code>state</code>, and <code>white</code> were simply bad predictors? In that case, it might be impossible to predict whether an eligible school would accept or decline Title 1 funding.</p>
<p>I decided a more likely explanation was that my model had failed because I had tried to make for all fifty states. If each state had its own laws governing whether an eligible school accepted or declined Title 1 funding, then the discrepancy between the states’ laws would confound my model. I needed to narrow my focus to one state and see what I could come up with.</p>
</div>
<div id="section-eligible-schools-pt.-3" class="section level2">
<div name="eligible_schools,_pt_3" data-unique="eligible_schools,_pt_3"></div><h2><strong>Eligible schools, pt. 3</strong></h2>
<p>Link: <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/e20ef063-4b6d-4c84-811c-7cca3ac15fe7" class="uri">https://data.world/wangweiyi722/f-17-eda-project-4/insights/e20ef063-4b6d-4c84-811c-7cca3ac15fe7</a></p>
<p><strong>Introduction</strong></p>
<p>I had realized that because each state had its own rules for whether an eligible school should or should not receive Title 1 funding, it was a fool’s errand to try to design one function for multiple states.</p>
<p>Consequently, I decided to narrow my focus to one state: Texas. This would eliminate the effect of multiple states having different laws governing whether an eligible school should accept or decline funding, enabling us to identify patterns in the data.</p>
<p><strong>Boosting</strong></p>
<p>To get started, I used boosting to confirm that the most influential variables nationally (i.e., <code>lowest_grade</code> and <code>white</code>, since we weren’t including <code>state</code> anymore) were also the most influential variables in Texas.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3691" aria-expanded="false" aria-controls="rcode-643E0F3691"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3691"><pre class="r"><code class="r"><span class="identifier">texas.n</span> <span class="operator">&lt;-</span> <span class="identifier">df.n</span> <span class="operator">%&gt;%</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">state</span><span class="operator">==</span><span class="string">"Texas"</span><span class="paren">)</span>
<span class="identifier">boost.program</span><span class="operator">=</span><span class="identifier">gbm</span><span class="paren">(</span>
  <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">has_program</span><span class="paren">)</span><span class="operator">~</span>
    <span class="identifier">hisp</span><span class="operator">+</span>
    <span class="identifier">white</span><span class="operator">+</span>
    <span class="identifier">as.factor</span><span class="paren">(</span><span class="identifier">lowest_grade</span><span class="paren">)</span>,
  <span class="identifier">data</span><span class="operator">=</span><span class="identifier">texas.n</span>,
  <span class="identifier">distribution</span><span class="operator">=</span><span class="string">"gaussian"</span>,
  <span class="identifier">n.trees</span><span class="operator">=</span><span class="number">100</span>,
  <span class="identifier">shrinkage</span><span class="operator">=</span><span class="number">0.1</span>,
  <span class="identifier">interaction.depth</span><span class="operator">=</span><span class="number">4</span><span class="paren">)</span>

<span class="identifier">renderPlot</span><span class="paren">(</span><span class="identifier">summary</span><span class="paren">(</span><span class="identifier">boost.program</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<div id="out23fb3bd10e009710" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 400px"><img src="data:image/png;base64,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" width="808" height="400"></div>
<p><em>Note: For this document, I didn’t use all the variables I used for the <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/e20ef063-4b6d-4c84-811c-7cca3ac15fe7">insight</a>, because I didn’t want it to take forever to load. In the boosting table above, the top two variables are the same in the insight and here.</em></p>
<p>These results do suggest that the most influential variables in Texas, as in the nation, are <code>lowest_grade</code> and <code>white</code>. Notice that the dropoff between <code>white</code> and <code>hisp</code> is precipitous. So I decided to see how well <code>lowest_grade</code> and <code>white</code> might perform if we were to use them to predict eligible schools’ rates of receiving Title 1 funding. We didn’t need a model to get a sense of those predictors’ usefulness; some simple visualization would suffice.</p>
<p><strong>Visualizing the Data</strong></p>
<p>Since <code>state</code> was out of the picture, we finally had a two-dimensional dataset–and that meant we could finally do some visualization!</p>
<p>I made a simple plot to show the distribution of eligible schools that received and did not receive Title 1 funding. The green dots represent eligible schools that do not receive Title1 funding, while the blue dots represent eligible schools that do receive Title 1 funding. On the x axis, -1 represents pre-k, 0 represents kindergarten, 1 represents first grade, and so on.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3692" aria-expanded="false" aria-controls="rcode-643E0F3692"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3692"><pre class="r"><code class="r"><span class="comment"># In the code below, I changed `lowest_grade` and `has_program` (which is the output variable) to integer values. This made visualization simpler and also would enable the support vector machine I would make later on.</span>
<span class="identifier">texas.n</span> <span class="operator">=</span> <span class="identifier">texas.n</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">white</span>, <span class="identifier">lowest_grade</span>, <span class="identifier">has_program</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span>
    <span class="identifier">lg_int</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span> <span class="comment"># lg_int represents the lowest grade offered. Kindergarten is 0.</span>
      <span class="identifier">grepl</span><span class="paren">(</span><span class="string">"\\d{2}.*"</span>, <span class="identifier">lowest_grade</span><span class="paren">)</span>,
      <span class="identifier">suppressWarnings</span><span class="paren">(</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">substr</span><span class="paren">(</span><span class="identifier">lowest_grade</span>,<span class="number">1</span>,<span class="number">2</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>,
      <span class="identifier">ifelse</span><span class="paren">(</span>
        <span class="identifier">grepl</span><span class="paren">(</span><span class="string">"\\d.*"</span>, <span class="identifier">lowest_grade</span><span class="paren">)</span>,
        <span class="identifier">suppressWarnings</span><span class="paren">(</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">substr</span><span class="paren">(</span><span class="identifier">lowest_grade</span>,<span class="number">1</span>,<span class="number">1</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>,
        <span class="identifier">ifelse</span><span class="paren">(</span>
          <span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"Kindergarten"</span>,
          <span class="number">0</span>,
          <span class="operator">-</span><span class="number">1</span>
        <span class="paren">)</span>
      <span class="paren">)</span>
    <span class="paren">)</span>
  <span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">hp_int</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">has_program</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="number">1</span>,<span class="number">0</span><span class="paren">)</span><span class="paren">)</span> <span class="comment"># whether a school receives funding</span>

<span class="identifier">x.n</span><span class="operator">=</span><span class="identifier">matrix</span><span class="paren">(</span>
  <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">lg_int</span>, <span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">white</span><span class="paren">)</span>,
  <span class="identifier">ncol</span><span class="operator">=</span><span class="number">2</span><span class="paren">)</span>

<span class="identifier">renderPlot</span><span class="paren">(</span><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">x.n</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">+</span><span class="number">3</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"Lowest Grade"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"White Students"</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<div id="outb955d285d401af4c" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 400px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAygAAAGQCAMAAAByLLTyAAAAhFBMVEUAAAAAADoAAGYAAP8AOjoAOmYAOpAAZrYAzQA6AAA6ADo6AGY6OmY6OpA6ZrY6kNtmAABmADpmAGZmOgBmOpBmkJBmtv+QOgCQOjqQOmaQZgCQkGaQtpCQ29uQ2/+2ZgC2Zjq225C2/7a2///bkDrb/7bb////tmb/25D//7b//9v///8WzHTxAAAACXBIWXMAAAsSAAALEgHS3X78AAAQT0lEQVR4nO3di3bbxhWFYcpuJbmOIllpJadpxDRixYve//1KgKRiL4HwxmBwcObM/61kKXY0AAjM5lxwW7wC+KHF3BsAlICgAAKCAggICiAgKICAoAACggIICAogICiAgKAAAoICCAgKICAogICgAAKCAggICiAgKICAoAACggIICAogICiAgKAAAoICCAgKICAogICgAAKCAggICiAgKICAoAACggIICAogICiAgKAAAoICCAgKICAogICgAAKCAggICiAgKICAoAACggIICAogICiAgKAAAoICCAgKICAogICgAAKCAggICiAgKICAoAACggIICAogICiA4MdB2XxaND48G2wN4NQPg7J7fGh/ri9f3pUF4hgZlO3983c/h5QFijE2KH0tSuImAf6MDcrr9q5tmDrGKAQFcYwOyjRlAV8ICiAYHZTz08MEBXEwmB/p+vp67k2AAaaHx7m+JilVoEUZh6BUgunhcQhKJZj1Gomc1GGCoIhXxwAFYXoYEDCYBwRMD8NakcM6WhQYK3OikOlhGKs0KNOURVwEJWNZBFZiTrJMD188MZhHcDkG87vHW4KC2PJMDy+vCApCyzQ9vPrbZ4KCwDJMD982P1bv54cJCuJg1gsQEBRAQFAAAUEBBAQFEBAUQEBQAAFBAQQEBRAQFEBAUAABQQEEBAUQEBRAQFAAAUEBBAQFEBAUQEBQAAFBAQQEBRAQFEBAUAABQQEEBAUQEBRAQFAAAUEBBAQFEBAUQEBQAAFBAQQEBRAQFEBAUABBjvfMN96/wpGgIJBMbwV+XV++DC4LFCPPe+b/+jmkLFAMWhRAkOE984xREB+zXoCAoAACpocBAYN5QMD0MCCgRQEETA8DAma9YO3jx49zb8JwEwRlcZK0QYju48cSk5JjMN/0vt4PUWhR0KnaoLQTXpuf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" width="808" height="400"></div>
<p>There seemed to be a pretty clear difference in the distribution of colors in the chart: there were almost no green dots on the left side of the plot, which meant that eligible elementary schools (or at least schools that include elementary-aged children) tended to receive funding. Meanwhile, eligible middle schools and high schools tend to vary.</p>
<p>I decided to calculate the rates of funding for eligible elementary schools vs.&nbsp;eligible middle and high schools.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3693" aria-expanded="false" aria-controls="rcode-643E0F3693"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3693"><pre class="r"><code class="r"><span class="identifier">texas_middle_and_high</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">texas.n</span>,<span class="identifier">lg_int</span><span class="operator">&gt;=</span><span class="number">6</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">count</span><span class="paren">(</span>
  <span class="identifier">texas_middle_and_high</span>,
  <span class="identifier">texas_middle_and_high</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">==</span><span class="number">1</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">ct</span><span class="operator">$</span><span class="string">"texas_middle_and_high$hp_int == 1"</span>,<span class="identifier">ct</span><span class="operator">$</span><span class="identifier">n</span><span class="paren">)</span>
<span class="identifier">names</span><span class="paren">(</span><span class="identifier">ct</span><span class="paren">)</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span><span class="string">"receive_funding.MIDDLE_AND_HIGH_SCHOOLS"</span>, <span class="string">"count"</span><span class="paren">)</span>
<span class="identifier">kable</span><span class="paren">(</span><span class="identifier">ct</span>, <span class="identifier">format</span><span class="operator">=</span><span class="string">"markdown"</span><span class="paren">)</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">receive_funding.MIDDLE_AND_HIGH_SCHOOLS</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">679</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">1824</td>
</tr>
</tbody>
</table>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3694" aria-expanded="false" aria-controls="rcode-643E0F3694"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3694"><pre class="r"><code class="r"><span class="identifier">texas_elem</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">texas.n</span>,<span class="identifier">lg_int</span><span class="operator">&lt;</span><span class="number">6</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">count</span><span class="paren">(</span>
  <span class="identifier">texas_elem</span>,
  <span class="identifier">texas_elem</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">==</span><span class="number">1</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">ct</span><span class="operator">$</span><span class="string">"texas_elem$hp_int == 1"</span>,<span class="identifier">ct</span><span class="operator">$</span><span class="identifier">n</span><span class="paren">)</span>
<span class="identifier">names</span><span class="paren">(</span><span class="identifier">ct</span><span class="paren">)</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span><span class="string">"receive_funding.ELEMENTARY_SCHOOLS"</span>, <span class="string">"count"</span><span class="paren">)</span>
<span class="identifier">kable</span><span class="paren">(</span><span class="identifier">ct</span>, <span class="identifier">format</span><span class="operator">=</span><span class="string">"markdown"</span><span class="paren">)</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">receive_funding.ELEMENTARY_SCHOOLS</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">225</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">4137</td>
</tr>
</tbody>
</table>
<p>With a little bit of calculation, we can use those numbers to figure out the following:</p>
<ul>
<li>Texas middle schools and high schools that are eligible for Title 1 receive funding <strong>73% of the time</strong>.</li>
<li>Texas elementary schools that are eligible for Title 1 receive funding <strong>95% of the time</strong>.</li>
</ul>
<p><strong>Comparing Texas with California</strong></p>
<p>In California, all eligible schools receive funding.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3695" aria-expanded="false" aria-controls="rcode-643E0F3695"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3695"><pre class="r"><code class="r"><span class="identifier">california</span> <span class="operator">=</span> <span class="identifier">df.n</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">state</span><span class="operator">==</span><span class="string">"California"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">select</span><span class="paren">(</span><span class="identifier">white</span>, <span class="identifier">lowest_grade</span>, <span class="identifier">has_program</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span>
    <span class="identifier">lg_int</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span> <span class="comment"># lg_int represents the lowest grade offered. Kindergarten is 0.</span>
      <span class="identifier">grepl</span><span class="paren">(</span><span class="string">"\\d{2}.*"</span>, <span class="identifier">lowest_grade</span><span class="paren">)</span>,
      <span class="identifier">suppressWarnings</span><span class="paren">(</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">substr</span><span class="paren">(</span><span class="identifier">lowest_grade</span>,<span class="number">1</span>,<span class="number">2</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>,
      <span class="identifier">ifelse</span><span class="paren">(</span>
        <span class="identifier">grepl</span><span class="paren">(</span><span class="string">"\\d.*"</span>, <span class="identifier">lowest_grade</span><span class="paren">)</span>,
        <span class="identifier">suppressWarnings</span><span class="paren">(</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">substr</span><span class="paren">(</span><span class="identifier">lowest_grade</span>,<span class="number">1</span>,<span class="number">1</span><span class="paren">)</span><span class="paren">)</span><span class="paren">)</span>,
        <span class="identifier">ifelse</span><span class="paren">(</span>
          <span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"Kindergarten"</span>,
          <span class="number">0</span>,
          <span class="operator">-</span><span class="number">1</span>
        <span class="paren">)</span>
      <span class="paren">)</span>
    <span class="paren">)</span>
  <span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span><span class="identifier">hp_int</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">has_program</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="number">1</span>,<span class="number">0</span><span class="paren">)</span><span class="paren">)</span> <span class="comment"># whether a school receives funding</span>

<span class="identifier">california_middle_and_high</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">california</span>,<span class="identifier">lg_int</span><span class="operator">&gt;=</span><span class="number">6</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">count</span><span class="paren">(</span>
  <span class="identifier">california_middle_and_high</span>,
  <span class="identifier">california_middle_and_high</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">==</span><span class="number">1</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">ct</span><span class="operator">$</span><span class="string">"california_middle_and_high$hp_int == 1"</span>,<span class="identifier">ct</span><span class="operator">$</span><span class="identifier">n</span><span class="paren">)</span>
<span class="identifier">names</span><span class="paren">(</span><span class="identifier">ct</span><span class="paren">)</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span><span class="string">"receive_funding.MIDDLE_AND_HIGH_SCHOOLS"</span>, <span class="string">"count"</span><span class="paren">)</span>
<span class="identifier">kable</span><span class="paren">(</span><span class="identifier">ct</span>, <span class="identifier">format</span><span class="operator">=</span><span class="string">"markdown"</span><span class="paren">)</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">receive_funding.MIDDLE_AND_HIGH_SCHOOLS</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">TRUE</td>
<td align="right">2505</td>
</tr>
</tbody>
</table>
<p>Notice that there is only one row: that’s because no eligible schools did not receive funding.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3696" aria-expanded="false" aria-controls="rcode-643E0F3696"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3696"><pre class="r"><code class="r"><span class="identifier">california_elem</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span><span class="identifier">california</span>,<span class="identifier">lg_int</span><span class="operator">&lt;</span><span class="number">6</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">count</span><span class="paren">(</span>
  <span class="identifier">california_elem</span>,
  <span class="identifier">california_elem</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">==</span><span class="number">1</span><span class="paren">)</span>
<span class="identifier">ct</span> <span class="operator">&lt;-</span> <span class="identifier">data.frame</span><span class="paren">(</span><span class="identifier">ct</span><span class="operator">$</span><span class="string">"california_elem$hp_int == 1"</span>,<span class="identifier">ct</span><span class="operator">$</span><span class="identifier">n</span><span class="paren">)</span>
<span class="identifier">names</span><span class="paren">(</span><span class="identifier">ct</span><span class="paren">)</span> <span class="operator">&lt;-</span> <span class="identifier">c</span><span class="paren">(</span><span class="string">"receive_funding.ELEMENTARY_SCHOOLS"</span>, <span class="string">"count"</span><span class="paren">)</span>
<span class="identifier">kable</span><span class="paren">(</span><span class="identifier">ct</span>, <span class="identifier">format</span><span class="operator">=</span><span class="string">"markdown"</span><span class="paren">)</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">receive_funding.ELEMENTARY_SCHOOLS</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">TRUE</td>
<td align="right">4874</td>
</tr>
</tbody>
</table>
<p>This tells us that Texas is different from other states, e.g.&nbsp;California. In Texas, the majority of eligible elementary schools and ~70% of eligible middle/high schools receive Title 1 funding; in California, 100% of all eligible schools receive it.</p>
<p><strong>Interpretation</strong></p>
<p>This was a major breakthrough. It seemed to say so much about my models, the data, and even things outside the data:</p>
<ul>
<li><strong>It told us something about Texas law.</strong> That huge difference between school types in Texas seemed to suggest that, in Texas, the law mandates that eligible elementary schools accept Title 1 funding, and perhaps establishes criteria for whether eligible middle and high schools should accept. By analyzing the data, we had learned about something that actually wasn’t in the dataset!</li>
<li><strong>I would need to exclude elementary schools from my models going forward–at least for the state of Texas.</strong> In Texas, elementary schools are always going to accept funding. That means that including those schools in my models could only weaken the models. As long as I was attempting to model data for Texas, I would need to exclude elementary schools going forward and just focus on middle and high schools.</li>
<li><strong>We confirmed that state law determines an eligible school’s policy on Title 1 funding.</strong> Since Texas differs from California, we know that the federal government doesn’t set blanket policies for the states on Title 1 funding. That means we shouldn’t try to build models for all 50 states at once.</li>
</ul>
</div>
<div id="section-eligible-schools-pt.-4" class="section level2">
<div name="eligible_schools,_pt_4" data-unique="eligible_schools,_pt_4"></div><h2><strong>Eligible schools, pt. 4</strong></h2>
<p>Link: <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/c879cf27-aa0a-475d-ae8f-b2268b6b0920" class="uri">https://data.world/wangweiyi722/f-17-eda-project-4/insights/c879cf27-aa0a-475d-ae8f-b2268b6b0920</a></p>
<p><strong>Introduction</strong></p>
<p>At this point, it’s clear that state law does determine whether a state’s eligible schools accepts Title 1 funding. Texas seems to have a policy whereby Title 1-eligible schools with young children receive Title 1 funding more often than Title 1-eligible middle schools and high schools.</p>
<p>Now that we know to look at states individually–and also to look at middle/high schools separately from elementary schools–we may be able to formulate some good models. What criteria determine whether an eligible middle/high school in Texas receives Title 1 funding?</p>
<p><strong>Hypothesizing</strong></p>
<p>Perhaps race plays an unspoken role in the criteria for determining whether or not an eligible school gets funding, just as it plays an unspoken role in redistricting. A good hypothesis, then, might be that eligible middle and high schools with a higher proportion of white students tend to get funding more often than those with a higher proportion of Hispanic students. I decided to test that hypothesis using an SVM (support vector machine) applied to all the data for Texas middle and high schools.</p>
<p><strong>Preliminary Visualization</strong></p>
<p>To find out whether we should use a linear or non-linear (radial) SVM, let’s chart our data and see whether there’s a clear distinction between white and Hispanic schools.</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3697" aria-expanded="false" aria-controls="rcode-643E0F3697"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3697"><pre class="r"><code class="r"><span class="comment"># Manipulating data to exclude elementary schools and facilitate modeling</span>
<span class="identifier">texas.n</span> <span class="operator">=</span> <span class="identifier">df.n</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">filter</span><span class="paren">(</span>
    <span class="identifier">state</span><span class="operator">==</span><span class="string">"Texas"</span>,
    <span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"6th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"7th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"8th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"9th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"10th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"11th Grade"</span><span class="operator">|</span><span class="identifier">lowest_grade</span><span class="operator">==</span><span class="string">"12th Grade"</span><span class="paren">)</span> <span class="operator">%&gt;%</span>
  <span class="identifier">dplyr</span><span class="operator">:</span><span class="operator">:</span><span class="identifier">mutate</span><span class="paren">(</span>
    <span class="identifier">perc_white</span><span class="operator">=</span><span class="identifier">white</span><span class="operator">/</span><span class="identifier">member</span>,
    <span class="identifier">perc_hisp</span><span class="operator">=</span><span class="identifier">hisp</span><span class="operator">/</span><span class="identifier">member</span>,
    <span class="identifier">hp_int</span><span class="operator">=</span><span class="identifier">ifelse</span><span class="paren">(</span><span class="identifier">has_program</span><span class="operator">==</span><span class="string">"Yes"</span>,<span class="number">1</span>,<span class="number">0</span><span class="paren">)</span><span class="paren">)</span>

<span class="comment"># Plotting percent white against percent Hispanic</span>
<span class="identifier">x</span><span class="operator">=</span><span class="identifier">matrix</span><span class="paren">(</span>
  <span class="identifier">cbind</span><span class="paren">(</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">perc_white</span>, <span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">perc_hisp</span><span class="paren">)</span>,
  <span class="identifier">ncol</span><span class="operator">=</span><span class="number">2</span><span class="paren">)</span>
<span class="identifier">renderPlot</span><span class="paren">(</span><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">x</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">hp_int</span><span class="operator">+</span><span class="number">3</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">19</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"Percent White"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Percent Hispanic"</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<div id="outd36fbe537ec80ebd" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 400px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAygAAAGQCAMAAAByLLTyAAAAh1BMVEUAAAAAADoAAGYAAP8AOjoAOpAAZrYAzQA6AAA6ADo6AGY6OmY6OpA6ZrY6kNtmAABmADpmAGZmOgBmOjpmOpBmZgBmZmZmtv+QOgCQOjqQOmaQZgCQtpCQ29uQ2/+2ZgC2Zjq2/7a2///bkDrb25Db/7bb/9vb////tmb/25D//7b//9v///9GJj6sAAAACXBIWXMAAAsSAAALEgHS3X78AAAgAElEQVR4nO2di7rjtpKd2wex6ficaftMJmk7M+nOuJO4L3z/58uWSKBWXUCCIiVwb6312b0lEiiAZP0oXEjq3UhR1Kre9a4ARb0GERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKahBBoagGERSKatAeUN5R1NvRHUHZkZeizqXdoHz9+crb3/68IS9FvRbtBeX77x+uf7/8+NfmvBT1arQXlG///FP93ZKXol6NGFEoqkG7xyjffuUYhXr76jHrlVLaYZaiOqgDKGnSDssU9WgdBQoM5teWaC6UDMNAVqhXpD4RZRgmUsgK9UrUG5Q07CiBoh6lfqAk0Y5CKOoh6jTrpUEhKtTZtXtl/td55O4XUpZAidRSXYrqo90R5fvv7zfmrXBCUqgTa3/X69tvH7flrYJCVqjTqt+CI0mhXpHOBgpRoU6p84GSeDMYdT6dEBQGFup8IigU1aBeoAguQx0U8kKdRd2eR2kAhZGFOo26va5oDRR2w6gzqT8obdpRD4rar/5dL5JCvQKddtbLahj45ArVT68JFJJCdVNfUNqhGQgK1VOdxiibQZlIISpUJ3WZ9RLvbwflhRSOU6hu6grKuAWUmasdFaKom9URlJcPjaDwCXuqt/osOKoY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" width="808" height="400"></div>
<p>Wow, now that is an ungodly mess. The green dots represent eligible schools that decline Title1 funding, while the blue represent eligible schools that accept Title 1 funding. Since they’re all on top of one another, we know a linear SVM would be inappropriate.</p>
<p><em>Note: Omitted here is a use of cross-validation to find good tuning parameters for our SVM, viz. gamma and cost. You can refer to the <a href="https://data.world/wangweiyi722/f-17-eda-project-4/insights/c879cf27-aa0a-475d-ae8f-b2268b6b0920">insight</a> for the code I used to perform the tuning. For this document, I used hard-coded values for gamma and cost in order to cut down the document’s loadtime.</em></p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3698" aria-expanded="false" aria-controls="rcode-643E0F3698"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3698"><pre class="r"><code class="r"><span class="comment"># Radial SVM</span>
<span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span>
  <span class="identifier">has_program</span><span class="operator">~</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">perc_white</span><span class="operator">+</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">perc_hisp</span>,
  <span class="identifier">data</span><span class="operator">=</span><span class="identifier">texas.n</span>,
  <span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,
  <span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,
  <span class="identifier">cost</span><span class="operator">=</span><span class="number">5</span>,
  <span class="identifier">gamma</span><span class="operator">=</span><span class="number">5</span><span class="paren">)</span>

<span class="comment"># Displaying the results</span>
<span class="identifier">xdim1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="number">0</span>,<span class="identifier">to</span><span class="operator">=</span><span class="number">.5</span>,<span class="identifier">by</span><span class="operator">=</span><span class="number">.015</span><span class="paren">)</span> <span class="comment"># .5 = 50% white</span>
<span class="identifier">xdim2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="number">0</span>,<span class="identifier">to</span><span class="operator">=</span><span class="number">.5</span>,<span class="identifier">by</span><span class="operator">=</span><span class="number">.015</span><span class="paren">)</span> <span class="comment"># .5 = 50% Hispanic</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">xdim1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">xdim2</span><span class="paren">)</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">renderPlot</span><span class="paren">(</span><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="operator">+</span><span class="number">1</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">25</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.5</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"Percent White"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Percent Hispanic"</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<div id="outcd2e5b2ec2f9bcb3" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 400px"><img src="data:image/png;base64,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" width="808" height="400"></div>
<p>That figure reveals that our SVM model didn’t do much good. It’s also inherently error-prone, because if we allowed it to, it would make a prediction for a scenario where a school was 100% white and 100% Hispanic at the same time.</p>
<p>If we work with the raw numbers of white students and Hispanic students at a school, rather than their proportion, we get a radial SVM that seems similarly useless:</p>
<div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs code-folding-btn pull-right" data-toggle="collapse" data-target="#rcode-643E0F3699" aria-expanded="false" aria-controls="rcode-643E0F3699"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3699"><pre class="r"><code class="r"><span class="identifier">svmfit</span><span class="operator">=</span><span class="identifier">svm</span><span class="paren">(</span>
  <span class="identifier">has_program</span><span class="operator">~</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">white</span><span class="operator">+</span><span class="identifier">texas.n</span><span class="operator">$</span><span class="identifier">hisp</span>,
  <span class="identifier">data</span><span class="operator">=</span><span class="identifier">texas.n</span>,
  <span class="identifier">type</span><span class="operator">=</span><span class="string">"C"</span>,
  <span class="identifier">kernel</span><span class="operator">=</span><span class="string">"radial"</span>,
  <span class="identifier">cost</span><span class="operator">=</span><span class="number">5</span>,
  <span class="identifier">gamma</span><span class="operator">=</span><span class="number">5</span><span class="paren">)</span>

<span class="identifier">xdim1</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="number">0</span>,<span class="identifier">to</span><span class="operator">=</span><span class="number">1960</span>,<span class="identifier">by</span><span class="operator">=</span><span class="number">40</span><span class="paren">)</span>
<span class="identifier">xdim2</span><span class="operator">=</span><span class="identifier">seq</span><span class="paren">(</span><span class="identifier">from</span><span class="operator">=</span><span class="number">0</span>,<span class="identifier">to</span><span class="operator">=</span><span class="number">3050</span>,<span class="identifier">by</span><span class="operator">=</span><span class="number">65</span><span class="paren">)</span>
<span class="identifier">xgrid</span><span class="operator">=</span><span class="identifier">expand.grid</span><span class="paren">(</span><span class="identifier">X1</span><span class="operator">=</span><span class="identifier">xdim1</span>,<span class="identifier">X2</span><span class="operator">=</span><span class="identifier">xdim2</span><span class="paren">)</span>
<span class="identifier">ygrid</span><span class="operator">=</span><span class="identifier">predict</span><span class="paren">(</span><span class="identifier">svmfit</span>,<span class="identifier">xgrid</span><span class="paren">)</span>
<span class="identifier">renderPlot</span><span class="paren">(</span><span class="identifier">plot</span><span class="paren">(</span><span class="identifier">xgrid</span>,<span class="identifier">col</span><span class="operator">=</span><span class="identifier">as.numeric</span><span class="paren">(</span><span class="identifier">ygrid</span><span class="paren">)</span><span class="operator">+</span><span class="number">3</span>,<span class="identifier">pch</span><span class="operator">=</span><span class="number">25</span>,<span class="identifier">cex</span><span class="operator">=</span><span class="number">.5</span>,<span class="identifier">xlab</span><span class="operator">=</span><span class="string">"White Students"</span>,<span class="identifier">ylab</span><span class="operator">=</span><span class="string">"Hispanic Students"</span><span class="paren">)</span><span class="paren">)</span></code></pre></div>
<div id="out242cc0a57bec8f10" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 400px"><img src="data:image/png;base64,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rjVDusg7SsfDrff/9B2C3VE6vA/r/ub6oBnSRXqUjv6Tau14zrKL4VFEorgOdPe5LTi48Cjtrc1dtUPS3muffzy+Ruo54Pbzk2E6jfbtGdH5sL7kiWZIF/s9ysW9828mOsJ9j+J8WDddT8hbF9+jEDJDmCiEADBRCAFgohACwEQhBICJQggAE4UQACYKIQBMFEIAmCiEADBRCAFgohACwEQhBICJQggAE4UQACYKIQBMFEIAmCiEADBRCAFgohACwESpRNund9v2i95evrbKOf4lm+a0nRd/63fSaRvlCvy1BJolTJRKbK6P//uv9h/Xv37VxS/9/uaYEptPT0wUDzBRKrG7enr+/e/tP+53X/7W9ez98s+b4x1kf9N1hn9rVfTtf47H//vl8a2777/9Z9dsp73TXP338bLu/29Xr9eQUjBRKrH//rj/6///aNsU7j533XBfH70e3rqxPd+9NJt6/fev59rHtZeX/LqsbXXortfczGCiVKK9k3xtO/V+Pbymwcuftglu+4vfsu0ayv1KlPbfHx+9Xl/y6zKHLX5nBxOlFpvbze1he330KjJR2r0TLn7+4u/+fP8rUbqHsYfb15ec/Mvd55NLSAmYKLXYXv7jeLf4+o/7XqJ8f/z5gvafx3vOuzvK958e5lelbOuufem8YKLUYv+Xq6fjA9i/P8pE6XxI90vfVb3aXQlenq02v516lBdz8npZ+3omSlmYKLV4vuu2Sbs8vTU833VVr9fHqPYR6/h/23+5Wa3+o7udvFW9Ln7eiNrTD6x6lYaJQggAE4UQACYKIQBMFEIAmCiEADBRCAFgohACwEQhBICJQggAE4UQACYKIQBMFEIAmCiEADBRCAFgohACwEQhBICJQggAE4UQgH8BeQCBJNY3awsAAAAASUVORK5CYII=" width="808" height="400"></div>
<p><strong>Interpretation</strong></p>
<p>These results indicate either that SVM is simply inappropriate for this problem, or that Hispanic and white aren’t very good predictors for determining whether eligible middle and high schools in Texas will or won’t receive Title 1 funding. Being as I just thought of those predictors off the top of my head, I’m guessing the issue is that they’re bad predictors.</p>
</div>
<div id="section-eligible-schools-conclusion" class="section level2">
<div name="eligible_schools,_conclusion" data-unique="eligible_schools,_conclusion"></div><h2><strong>Eligible schools, conclusion</strong></h2>
<p>In the end, I didn’t come up with a great model for whether an eligible school will accept Title 1 funding–but that doesn’t mean that there isn’t one. I do firmly believe that, after scaling the dataset down to the state of Texas and looking only at high schools and middle schools, it’s entirely possible to find out what categories set forth in the state of Texas’s policy.</p>
<p>Here’s what we learned:</p>
<ul>
<li>Not all eligible schools end up receiving Title 1 funding.</li>
<li>State law determines whether an eligible school receives or does not receive Title 1 funding.</li>
<li>Each state has its own laws, so making a single model for all 50 states inappropriate.</li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</div>
  </div>



</body></html>